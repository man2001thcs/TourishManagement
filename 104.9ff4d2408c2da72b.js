"use strict";(self.webpackChunkroxanne=self.webpackChunkroxanne||[]).push([[104],{4104:(Ui,Nt,p)=>{p.r(Nt),p.d(Nt,{UserModule:()=>Ai});var v=p(6582),It=p(8224),E=p(6895),t=p(4650),Gt=p(8728),Dt=p(3790),S=p(5861),l=p(4006),Zt=p(8372),Pt=p(9300),Tt=p(1089),P=p(2340),k=p(5412),nt=p(694),I=p(529),Rt=p(2673),at=p(4144),G=p(9549),rt=p(8255),Z=p(4859),st=p(7084),R=p(5311),Ft=p(5369),Ot=p(4503),Mt=p(4511);const Lt=["mySidenav"],qt=["notificationTab"],Jt=["header"],Ht=["autocompleteSearch"],Qt=["searchInput"];function Yt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openNotificationNav())}),t._UZ(1,"i",42),t.qZA()}}function Bt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openNotificationNav())}),t._UZ(1,"i",42),t.qZA()}if(2&i){const e=t.oxw();t.s9C("matBadge",e.notifyUnreadNumber)}}function zt(i,a){if(1&i&&t._UZ(0,"app-tourish-auto-search-card",44),2&i){const e=a.$implicit,o=t.oxw();let n;t.Q6J("id",null!==(n=e.id)&&void 0!==n?n:"")("tourName",e.tourName)("tourPrice",o.getTotalPrice(e))}}function Kt(i,a){1&i&&(t.TgZ(0,"h6"),t._uU(1,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p"),t.qZA())}function $t(i,a){1&i&&(t.TgZ(0,"h6",45),t._uU(1," Menu "),t.qZA())}function Wt(i,a){if(1&i){const e=t.EpF();t.ynx(0,56),t.TgZ(1,"button",54),t.NdJ("click",function(){const r=t.CHM(e).$implicit,u=t.oxw(2);return t.KtG(u.navigateCategoryUrl("search-page",r.name))}),t._uU(2),t.qZA(),t.BQk()}if(2&i){const e=a.$implicit;t.s9C("ngbNavItem",e.id),t.xp6(2),t.hij(" ",e.name," ")}}function Vt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",46)(1,"div",47)(2,"mat-expansion-panel",48)(3,"mat-expansion-panel-header")(4,"mat-panel-title")(5,"h6",49),t._uU(6," Th\u1ec3 lo\u1ea1i tour "),t.qZA()()(),t.TgZ(7,"div",50,51),t.NdJ("activeIdChange",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.activeItem=n)}),t.YNc(9,Wt,3,2,"ng-container",52),t.qZA()()(),t.TgZ(10,"div",47)(11,"mat-expansion-panel",48)(12,"mat-expansion-panel-header")(13,"mat-panel-title")(14,"h6",49),t._uU(15," H\xf3a \u0111\u01a1n "),t.qZA()()(),t.TgZ(16,"div",50,51),t.NdJ("activeIdChange",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.activeItem=n)}),t.ynx(18,53),t.TgZ(19,"button",54),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.navigateUrl("receipt/list"))}),t._uU(20," Danh s\xe1ch h\xf3a \u0111\u01a1n "),t.qZA(),t.BQk(),t.qZA()()(),t.TgZ(21,"div",47)(22,"mat-expansion-panel",48)(23,"mat-expansion-panel-header")(24,"mat-panel-title")(25,"h6",49),t._uU(26," Th\xf4ng b\xe1o "),t.qZA()()(),t.TgZ(27,"div",50,51),t.NdJ("activeIdChange",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.activeItem=n)}),t.ynx(29,55),t.TgZ(30,"button",54),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.navigateUrl("notification/list"))}),t._uU(31," Danh s\xe1ch th\xf4ng b\xe1o "),t.qZA(),t.BQk(),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(7),t.Q6J("activeId",e.activeItem),t.xp6(2),t.Q6J("ngForOf",e.categoryList),t.xp6(7),t.Q6J("activeId",e.activeItem),t.xp6(11),t.Q6J("activeId",e.activeItem)}}function jt(i,a){if(1&i&&t._UZ(0,"app-tourish-auto-search-card",44),2&i){const e=a.$implicit,o=t.oxw();let n;t.Q6J("id",null!==(n=e.id)&&void 0!==n?n:"")("tourName",e.tourName)("tourPrice",o.getTotalPrice(e))}}function Xt(i,a){1&i&&(t.TgZ(0,"h6"),t._uU(1,"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p"),t.qZA())}let te=(()=>{class i{constructor(e,o,n,r,u,d){this.dialog=e,this.tokenService=o,this.fb=n,this.router=r,this.renderer=u,this.http=d,this.checkNavOpen=new t.vpe,this.activeItem="1st",this.isNavOpen=!1,this.isNotifyOpen=!1,this.isAutoCompleteOpen=!1,this.avatarUrl=P.N.backend.blobURL+"/0-container/0_anonymus.png",this.searchControl=new l.NI(""),this.countNavClick=0,this.countNotifyClick=0,this.countSearchClick=0,this.subscriptions=[],this.tourList=[],this.tourLength=0,this.categoryList=[],this.categoryLength=0,this.notifyUnreadNumber=0,this.id=0,this.filteredInput=this.searchControl.valueChanges.pipe((0,Zt.b)(500))}ngOnInit(){this.getCategory(),this.id=Number(localStorage.getItem("id"))??0,console.log(localStorage.getItem("id")),this.showNotification(),this.activeItem=(0,Tt.p)(this.router.url),this.subscriptions.push(this.router.events.pipe((0,Pt.h)(e=>e instanceof v.m2)).subscribe(e=>{e instanceof v.m2&&(console.log(e.url),this.activeItem=(0,Tt.p)(e.url))})),this.searchFormGroup=this.fb.group({searchValue:["",l.kI.compose([l.kI.minLength(2),l.kI.maxLength(20),l.kI.pattern(/^[a-z]{6,32}$/i)])]}),this.searchFormGroup=new l.cw({search:new l.NI}),this.subscriptions.push(this.filteredInput.subscribe(e=>{e?(this.http.get("/api/GetTourishPlan",{params:{page:1,search:e,pageSize:6}}).pipe((0,Zt.b)(400)).subscribe(n=>{this.tourList=n.data,this.tourLength=this.tourList.length}),this.openAutoCompleteSearch()):this.closeAutoCompleteSearch()})),this.getImageList()}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}userInfo(){this.router.navigate(["/user/account/info"])}tourReceipt(){this.router.navigate(["/user/receipt/list"])}signOut(){var e=this;return(0,S.Z)(function*(){yield e.tokenService.signOut(),e.router.navigate(["/guest/login"])})()}outsideClick(e){}outsideNotificationClick(e){e&&this.isNotifyOpen&&(this.countNotifyClick++,console.log(this.countNotifyClick),this.countNotifyClick>=2&&this.closeNotificationNav())}outsideAutoCompleteSearchClick(e){e&&this.isAutoCompleteOpen&&(this.countSearchClick++,this.countSearchClick>=1&&this.closeAutoCompleteSearch())}addNewItem(e){this.checkNavOpen.emit(e)}openNav(){window.innerWidth>=1e3?(this.myNameElem.nativeElement.style.width="340px",this.myNameElem.nativeElement.style["margin-right"]="0px",this.myNameElem.nativeElement.style["padding-top"]="0px",this.myNameElem.nativeElement.style["padding-left"]="10px",this.myNameElem.nativeElement.style["padding-right"]="10px",this.myNameElem.nativeElement.style["border-bottom"]="2px solid #EDF1F7",this.myNameElem.nativeElement.style["border-right"]="2px solid #EDF1F7"):(console.log("abc"),this.renderer.setStyle(this.myNameElem.nativeElement,"width","100%"),this.myNameElem.nativeElement.style["margin-top"]="0px",this.myNameElem.nativeElement.style["margin-right"]="0px",this.myNameElem.nativeElement.style["padding-top"]="0px",this.myNameElem.nativeElement.style["padding-left"]="40px",this.myNameElem.nativeElement.style["padding-right"]="25px",this.myNameElem.nativeElement.style["border-bottom"]="2px solid #EDF1F7",this.myNameElem.nativeElement.style["border-right"]="2px solid #EDF1F7"),this.isNavOpen=!0,this.addNewItem(this.isNavOpen)}closeNav(){this.myNameElem.nativeElement.style.width="80px",this.myNameElem.nativeElement.style["margin-right"]="0px",this.myNameElem.nativeElement.style["margin-top"]="0px",this.myNameElem.nativeElement.style["padding-left"]="0px",this.myNameElem.nativeElement.style["padding-right"]="0px",this.myNameElem.nativeElement.style["border-bottom"]="0px solid #EDF1F7",this.myNameElem.nativeElement.style["border-left"]="0px solid #EDF1F7",this.myNameElem.nativeElement.style["border-right"]="0px solid #EDF1F7",this.headerElem.nativeElement.style.width="100%",document.body.style.backgroundColor="white",this.isNavOpen=!1,this.countNavClick=0,this.addNewItem(this.isNavOpen)}openNotificationNav(){window.innerWidth>=1e3?(this.nottifyTabElem.nativeElement.style.width="420px",this.nottifyTabElem.nativeElement.style["margin-right"]="0px",this.nottifyTabElem.nativeElement.style["padding-top"]="0px",this.nottifyTabElem.nativeElement.style["padding-left"]="0px",this.nottifyTabElem.nativeElement.style["padding-right"]="0px",this.nottifyTabElem.nativeElement.style["border-bottom"]="2px solid #EDF1F7",this.nottifyTabElem.nativeElement.style["border-right"]="2px solid #EDF1F7"):(this.renderer.setStyle(this.nottifyTabElem.nativeElement,"width","100%"),this.nottifyTabElem.nativeElement.style["margin-top"]="0px",this.nottifyTabElem.nativeElement.style["margin-right"]="0px",this.nottifyTabElem.nativeElement.style["padding-top"]="0px",this.nottifyTabElem.nativeElement.style["padding-left"]="40px",this.nottifyTabElem.nativeElement.style["padding-right"]="25px",this.nottifyTabElem.nativeElement.style["border-bottom"]="2px solid #EDF1F7",this.nottifyTabElem.nativeElement.style["border-right"]="2px solid #EDF1F7"),this.isNotifyOpen=!0}closeNotificationNav(){this.nottifyTabElem.nativeElement.style.width="0px",this.nottifyTabElem.nativeElement.style["margin-right"]="0px",this.nottifyTabElem.nativeElement.style["margin-top"]="0px",this.nottifyTabElem.nativeElement.style["padding-left"]="0px",this.nottifyTabElem.nativeElement.style["padding-right"]="0px",this.nottifyTabElem.nativeElement.style["border-bottom"]="0px solid #EDF1F7",this.nottifyTabElem.nativeElement.style["border-left"]="0px solid #EDF1F7",this.nottifyTabElem.nativeElement.style["border-right"]="0px solid #EDF1F7",document.body.style.backgroundColor="white",this.countNotifyClick=0,this.isNotifyOpen=!1}openAutoCompleteSearch(){this.autocompleteSearch.nativeElement.style.height="fit-content",this.autocompleteSearch.nativeElement.style["margin-top"]="40px",this.autocompleteSearch.nativeElement.style["padding-top"]="25px",this.autocompleteSearch.nativeElement.style["padding-bottom"]="25px",this.autocompleteSearch.nativeElement.style["border-bottom"]="2px solid #EDF1F7",this.autocompleteSearch.nativeElement.style["border-left"]="2px solid #EDF1F7",this.autocompleteSearch.nativeElement.style["border-right"]="2px solid #EDF1F7",this.isAutoCompleteOpen=!0}closeAutoCompleteSearch(){this.autocompleteSearch.nativeElement.style.height="0",this.autocompleteSearch.nativeElement.style["padding-top"]="0",this.autocompleteSearch.nativeElement.style["margin-top"]="40px",this.autocompleteSearch.nativeElement.style["padding-bottom"]="0px",this.autocompleteSearch.nativeElement.style["border-bottom"]="0px solid #EDF1F7",this.autocompleteSearch.nativeElement.style["border-left"]="0px solid #EDF1F7",this.autocompleteSearch.nativeElement.style["border-right"]="0px solid #EDF1F7",document.body.style.backgroundColor="white",this.isAutoCompleteOpen=!1,this.countSearchClick=0}navMenuClick(){var e=this;return(0,S.Z)(function*(){e.isNavOpen?yield e.closeNav():e.isNavOpen||(yield e.openNav())})()}navigateUrl(e){var o=this;return(0,S.Z)(function*(){o.router.navigate(["admin/"+e])})()}getImageList(){const o={resourceId:this.tokenService.getUser().Id,resourceType:0};return this.http.get("/api/GetFile",{params:o}).subscribe(n=>{n.data?.length>0&&(this.avatarUrl=this.generateUrl(n.data[0])),(null==n.data||null==n.data||0==n.data.length)&&(this.avatarUrl=P.N.backend.blobURL+"/0-container/0_anonymus.png")})}generateUrl(e){return P.N.backend.blobURL+"/0-container/0_"+e.id+e.fileType}getBlobUrl(){return P.N.backend.blobURL}formSubmit(){}showNotification(){"Notification"in window?"denied"!==Notification.permission&&Notification.requestPermission().then(e=>{}):console.log("This browser does not support notifications")}getTotalPrice(e){let o=0;return e.stayingSchedules?.forEach(n=>{o+=n.singlePrice??0}),e.eatSchedules?.forEach(n=>{o+=n.singlePrice??0}),e.movingSchedules?.forEach(n=>{o+=n.singlePrice??0}),o}getCategory(){this.http.get("/api/GetTourCategory",{params:{page:1,pageSize:6}}).subscribe(o=>{this.categoryList=o.data,console.log(o),this.categoryLength=o.count})}navigateCategoryUrl(e,o){var n=this;return(0,S.Z)(function*(){n.router.navigate(["user/"+e],{queryParams:{category:o}})})()}setNotifyUnread(e){this.notifyUnreadNumber=e}navigateSearchUrl(e){var o=this;return(0,S.Z)(function*(){o.router.navigate(["user/"+e],{queryParams:{search:o.searchControl.value}})})()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(k.uw),t.Y36(nt.i),t.Y36(l.qu),t.Y36(v.F0),t.Y36(t.Qsj),t.Y36(I.eN))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-user-header"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Lt,5),t.Gf(qt,5),t.Gf(Jt,5),t.Gf(Ht,5),t.Gf(Qt,5)),2&e){let n;t.iGM(n=t.CRH())&&(o.myNameElem=n.first),t.iGM(n=t.CRH())&&(o.nottifyTabElem=n.first),t.iGM(n=t.CRH())&&(o.headerElem=n.first),t.iGM(n=t.CRH())&&(o.autocompleteSearch=n.first),t.iGM(n=t.CRH())&&(o.searchInput=n.first)}},outputs:{checkNavOpen:"checkNavOpen"},decls:58,vars:13,consts:[["rel","stylesheet","href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"],[1,"container-fluid"],["header",""],[2,"display","flex","flex-direction","row","align-items","center"],[1,"img-logo",2,"border","2px solid black","border-radius","10px","margin-right","20px",3,"src"],[2,"font-size","35px !important","font-family","Brush Script MT","padding-top","16px"],[1,"searchInput",2,"margin-top","20px"],["appearance","outline",1,"full-width-input"],["matInput","","type","text","fullwidth","","name","search","id","search","placeholder","T\xecm ki\u1ebfm s\u1ea3n ph\u1ea9m",3,"formControl"],["searchInput",""],["mat-fab","","color","primary",2,"margin-bottom","20px","margin-left","10px",3,"click"],["aria-hidden","true",1,"fa","fa-search",2,"color","white"],["mat-mini-fab","","ghost","","status","primary","style","background-color: whitesmoke; margin-right: 10px",3,"click",4,"ngIf"],["mat-mini-fab","","ghost","","status","primary","matBadgeColor","warn","style","background-color: whitesmoke; margin-right: 10px",3,"matBadge","click",4,"ngIf"],["xPosition","before",1,"notification"],["beforeNotifyMenu","matMenu"],["mat-mini-fab","","color","primary",2,"margin","0 10px 0",3,"matMenuTriggerFor"],["alt","Avatar",1,"avatar",3,"src"],["menu","matMenu"],["mat-menu-item","",3,"click"],["id",".autocomplete-search",1,"autocomplete-search",3,"appOutsideClick"],["autocompleteSearch",""],[1,"searchContent"],["style","width: 100%",3,"id","tourName","tourPrice",4,"ngFor","ngForOf"],[4,"ngIf"],["id","mySidenav",1,"sidenav",3,"appOutsideClick"],["mySidenav",""],[1,"title-nav"],["style","\n        font-size: 24px;\n        font-weight: bolder;\n        color: white;\n        padding: 20px 0px 10px;\n        white-space: nowrap;\n      ",4,"ngIf"],["mat-stroked-button","",2,"margin-right","10px",3,"click"],["aria-hidden","true",1,"fa","fa-bars",2,"font-size","22px","color","rgb(105, 104, 104)"],["class","sideNavContent","style","width: 100%",4,"ngIf"],["id","autocomplete-search",1,"autocomplete-search",3,"appOutsideClick"],["id","myNotification",1,"notification-panel","nowrap",3,"appOutsideClick"],["notificationTab",""],[1,"title","nowrap"],["mat-form-label","",2,"font-weight","heavy","margin-bottom","0 !important"],[1,"button-wrap"],["mat-mini-fab","","color","accent",3,"click"],["aria-hidden","true",1,"fa","fa-times",2,"color","white"],[2,"height","90%",3,"isNotifyOpen","notifyUnreadNumber"],["mat-mini-fab","","ghost","","status","primary",2,"background-color","whitesmoke","margin-right","10px",3,"click"],["aria-hidden","true",1,"fa","fa-bell",2,"font-size","22px","color","rgb(105, 104, 104)"],["mat-mini-fab","","ghost","","status","primary","matBadgeColor","warn",2,"background-color","whitesmoke","margin-right","10px",3,"matBadge","click"],[2,"width","100%",3,"id","tourName","tourPrice"],[2,"font-size","24px","font-weight","bolder","color","white","padding","20px 0px 10px","white-space","nowrap"],[1,"sideNavContent",2,"width","100%"],[1,"sidenavCategory"],["expanded",""],[2,"font-size","16px","padding-bottom","0 !important","font-weight","bold","margin-bottom","0 !important","color","whitesmoke"],["ngbNav","","orientation","vertical",1,"nav-pills","flex-column",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem",4,"ngFor","ngForOf"],["ngbNavItem","8th"],["ngbNavLink","",3,"click"],["ngbNavItem","11th"],[3,"ngbNavItem"]],template:function(e,o){if(1&e&&(t._UZ(0,"link",0),t.TgZ(1,"div",1,2)(3,"div",3),t._UZ(4,"img",4),t.TgZ(5,"h3",5),t._uU(6," Roxanne.com "),t.qZA()(),t.TgZ(7,"div",6)(8,"mat-form-field",7),t._UZ(9,"input",8,9),t.qZA(),t.TgZ(11,"button",10),t.NdJ("click",function(){return o.navigateSearchUrl("search-page")}),t._UZ(12,"i",11),t.qZA()(),t.TgZ(13,"div",3),t.YNc(14,Yt,2,0,"button",12),t.YNc(15,Bt,2,1,"button",13),t._UZ(16,"mat-menu",14,15),t.TgZ(18,"button",16),t._UZ(19,"img",17),t.qZA()(),t.TgZ(20,"mat-menu",null,18)(22,"button",19),t.NdJ("click",function(){return o.userInfo()}),t._uU(23,"Th\xf4ng tin t\xe0i kho\u1ea3n"),t.qZA(),t.TgZ(24,"button",19),t.NdJ("click",function(){return o.tourReceipt()}),t._uU(25,"Tour \u0111\xe3 \u0111\u1eb7t"),t.qZA(),t.TgZ(26,"button",19),t.NdJ("click",function(){return o.signOut()}),t._uU(27,"\u0110\u0103ng xu\u1ea5t"),t.qZA()(),t.TgZ(28,"div",20,21),t.NdJ("appOutsideClick",function(r){return o.outsideAutoCompleteSearchClick(r)}),t.TgZ(30,"h6"),t._uU(31,"S\u1ea3n ph\u1ea9m t\xecm ki\u1ebfm"),t.qZA(),t.TgZ(32,"div",22),t.YNc(33,zt,1,3,"app-tourish-auto-search-card",23),t.YNc(34,Kt,2,0,"h6",24),t.qZA()()(),t.TgZ(35,"div",25,26),t.NdJ("appOutsideClick",function(r){return o.outsideClick(r)}),t.TgZ(37,"div",27),t.YNc(38,$t,2,0,"h6",28),t.TgZ(39,"button",29),t.NdJ("click",function(){return o.navMenuClick()}),t._UZ(40,"i",30),t.qZA()(),t.YNc(41,Vt,32,4,"div",31),t.qZA(),t.TgZ(42,"div",32,21),t.NdJ("appOutsideClick",function(r){return o.outsideAutoCompleteSearchClick(r)}),t.TgZ(44,"h6"),t._uU(45,"S\u1ea3n ph\u1ea9m t\xecm ki\u1ebfm"),t.qZA(),t.TgZ(46,"div",22),t.YNc(47,jt,1,3,"app-tourish-auto-search-card",23),t.YNc(48,Xt,2,0,"h6",24),t.qZA()(),t.TgZ(49,"div",33,34),t.NdJ("appOutsideClick",function(r){return o.outsideNotificationClick(r)}),t.TgZ(51,"div",35)(52,"h2",36),t._uU(53," Th\xf4ng b\xe1o "),t.qZA(),t.TgZ(54,"div",37)(55,"button",38),t.NdJ("click",function(){return o.closeNotificationNav()}),t._UZ(56,"i",39),t.qZA()()(),t.TgZ(57,"app-notification-pack",40),t.NdJ("notifyUnreadNumber",function(r){return o.setNotifyUnread(r)}),t.qZA()()),2&e){const n=t.MAs(21);t.xp6(4),t.s9C("src",o.getBlobUrl()+"/start-container/book_logo.png?sv=2021-10-04&st=2023-09-26T12%3A36%3A33Z&se=2040-01-27T12%3A36%3A00Z&sr=b&sp=r&sig=4WMWtw0igWEoBTLwaZvfyk6grD6JCurSP1z7fdNPJUc%3D",t.LSH),t.xp6(5),t.Q6J("formControl",o.searchControl),t.xp6(5),t.Q6J("ngIf",o.notifyUnreadNumber<=0),t.xp6(1),t.Q6J("ngIf",o.notifyUnreadNumber>0),t.xp6(3),t.Q6J("matMenuTriggerFor",n),t.xp6(1),t.s9C("src",o.avatarUrl,t.LSH),t.xp6(14),t.Q6J("ngForOf",o.tourList),t.xp6(1),t.Q6J("ngIf",o.tourLength<=0),t.xp6(4),t.Q6J("ngIf",o.isNavOpen),t.xp6(3),t.Q6J("ngIf",o.isNavOpen),t.xp6(6),t.Q6J("ngForOf",o.tourList),t.xp6(1),t.Q6J("ngIf",o.tourList.length<=0),t.xp6(9),t.Q6J("isNotifyOpen",o.isNotifyOpen)}},dependencies:[E.sg,E.O5,Rt.k,at.Nt,G.KE,rt.VK,rt.OP,rt.p6,l.Fj,l.JJ,l.oH,Z.lW,Z.nh,Z.cs,st.ib,st.yz,st.yK,R.Pz,R.nv,R.Fh,R.tO,Ft.A,Ot.h,Mt.j],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box;font-family:Helvetica}.container-fluid[_ngcontent-%COMP%]{display:flex;min-height:105px;flex-direction:row!important;flex-wrap:wrap;justify-content:space-evenly;width:100%;align-items:center;transition:.5s!important;opacity:1;top:0;padding-bottom:8px}  .notification.mat-mdc-menu-panel.mat-mdc-menu-panel{max-width:400px!important}.avatar[_ngcontent-%COMP%]{vertical-align:middle;width:30px;height:30px;border-radius:50%}.container-fluid[_ngcontent-%COMP%]:after{content:"";clear:both;display:table}.container-fluid[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:not(.sidenav)   div[_ngcontent-%COMP%]:not(.autocomplete-search)   div[_ngcontent-%COMP%]:not(.searchContent){padding-right:20px!important}.searchInput[_ngcontent-%COMP%]{width:800px!important;display:flex;flex-direction:row;align-items:center}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;margin-top:-5px;width:40px;height:40px;border-radius:100%!important;border:2px solid rgb(90,87,119)}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{margin-top:-10px;margin-right:-5px;position:absolute;width:50px!important;height:50px!important;border-radius:100%!important;border:3px solid rgb(15,116,45)}img.img-logo[_ngcontent-%COMP%]{max-width:50px;max-height:50px}.title-nav[_ngcontent-%COMP%]{background-color:#2a3650;width:100%;display:flex;justify-content:center;align-items:center;height:105px}.notification-panel[_ngcontent-%COMP%]{box-shadow:0 0 21px #59667a1a;word-break:keep-all!important;height:100%;display:block;width:0;position:fixed;z-index:2;top:0;right:0;background-color:#fff;transition:.5s;overflow-y:hidden;flex-direction:column;display:flex;align-items:center;flex-grow:0;opacity:1;margin-bottom:20px;margin-left:auto;margin-right:auto;overflow-x:hidden!important}.nowrap[_ngcontent-%COMP%]{flex-wrap:nowrap!important}.notification-panel[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-top:20px;margin-left:20px;margin-bottom:15px;padding-bottom:15px;display:flex;flex-direction:row;align-items:center;justify-content:space-between!important;border-bottom:2px solid #f3f3f3;width:100%}.notification-panel[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-wrap:nowrap}.sidenav[_ngcontent-%COMP%]{background-color:#2a3650!important;height:100%;display:block;width:70px;padding-left:10px;position:fixed;z-index:2;top:0;left:0;background-color:#fff;overflow-x:hidden!important;overflow-y:auto;transition:.5s;opacity:1;margin-bottom:20px}.sidenav[_ngcontent-%COMP%]   .sideNavContent[_ngcontent-%COMP%]{overflow-y:auto;height:auto;width:100%;padding:0 0 20px;background-color:#2a3650!important}.sidenav[_ngcontent-%COMP%]   .sideNavContent[_ngcontent-%COMP%]   .sidenavCategory[_ngcontent-%COMP%]{background-color:#2a3650!important;white-space:nowrap;width:100%;flex-direction:column;display:flex;overflow-x:hidden!important;margin-bottom:15px;border-bottom:1px solid #666666}mat-expansion-panel[_ngcontent-%COMP%]{background-color:#2a3650!important}.sidenav[_ngcontent-%COMP%]   .sideNavContent[_ngcontent-%COMP%]   .sidenavCategory[_ngcontent-%COMP%]:first-child{border-top:1px solid #666666}.autocomplete-search[_ngcontent-%COMP%]{height:0%;width:70%;position:absolute;padding-right:0!important;z-index:1;top:50px;background-color:#fff;overflow-y:hidden;transition:.1s;flex-direction:column;display:flex;opacity:1;margin-top:10px;padding-bottom:0!important;justify-content:center;align-items:center;border-end-end-radius:5px;border-bottom-left-radius:5px}.autocomplete-search[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.autocomplete-search[_ngcontent-%COMP%]   .searchContent[_ngcontent-%COMP%]{flex-direction:column;width:100%;display:flex}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:8px 8px 8px 32px;text-decoration:none;font-size:15px;color:#727889;display:block;transition:.3s}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f1f1f1}.sidenav[_ngcontent-%COMP%]   .closebtn[_ngcontent-%COMP%]{position:absolute;top:0;right:25px;font-size:36px;margin-left:50px}.full-width-input[_ngcontent-%COMP%]{width:95%!important}button[_ngcontent-%COMP%]{font-size:16px;font-weight:bolder;color:#6b7383}button[_ngcontent-%COMP%]:hover{background-color:#374462}  .mat-expansion-panel-body{padding:0 0 16px!important}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#fff;background-color:#374462;width:100%}  .mat-form-field-outline-start{border-radius:28px 0 0 28px!important;min-width:28px!important}  .mat-form-field-outline-end{border-radius:0 28px 28px 0!important;min-width:28px!important}  .mat-form-field-appearance-outline .mat-form-field-flex{padding:0 32px!important}@media screen and (max-height: 450px){.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}.searchInput[_ngcontent-%COMP%]{max-width:400px!important}}@media screen and (max-height: 1300px){.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}.searchInput[_ngcontent-%COMP%]{max-width:300px!important}.container-fluid[_ngcontent-%COMP%]{justify-content:center}}@media screen and (max-height: 1400px){.searchInput[_ngcontent-%COMP%]{max-width:380px!important}.container-fluid[_ngcontent-%COMP%]{justify-content:space-evenly}}']}),i})();const ee=["userMain"],ie=["outerChat"];let oe=(()=>{class i{constructor(){this.isNavOpen=!0}ngOnInit(){console.log("init")}checkNavOpen(e){console.log(e),e?this.openNav():this.closetNav()}openNav(){this.myNameElem.nativeElement.style["margin-left"]="340px",this.isNavOpen=!0}closetNav(){this.myNameElem.nativeElement.style["margin-left"]="60px",this.isNavOpen=!1}isChatOpen(e){console.log(e),this.outerChat.nativeElement.style.transform=e?"translate(0, -400px)":"translate(0, 0)"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-user-main"]],viewQuery:function(e,o){if(1&e&&(t.Gf(ee,5),t.Gf(ie,5)),2&e){let n;t.iGM(n=t.CRH())&&(o.myNameElem=n.first),t.iGM(n=t.CRH())&&(o.outerChat=n.first)}},decls:9,vars:1,consts:[[1,"user-main"],["userMain",""],[2,"height","100% !important",3,"checkNavOpen"],[1,"container-fluid",2,"width","100%","padding-top","0px !important"],[1,"outer-chat-container"],["outerChat",""],[3,"checkChatOpen"],[3,"isNavOpen"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0,1)(2,"app-user-header",2),t.NdJ("checkNavOpen",function(r){return o.checkNavOpen(r)}),t.qZA(),t.TgZ(3,"div",3),t._UZ(4,"router-outlet"),t.qZA(),t.TgZ(5,"div",4,5)(7,"app-chat",6),t.NdJ("checkChatOpen",function(r){return o.isChatOpen(r)}),t.qZA()(),t._UZ(8,"app-footer",7),t.qZA()),2&e&&(t.xp6(8),t.Q6J("isNavOpen",o.isNavOpen))},dependencies:[v.lC,Gt.c,Dt.P,te],styles:[".user-main[_ngcontent-%COMP%]{transition:.5s;opacity:1;margin-left:60px;position:relative;height:100%}.container-fluid[_ngcontent-%COMP%]{padding-top:2%!important;background-color:#fafafa;padding-right:0!important;padding-left:0!important;padding-bottom:2%;position:relative}.outer-chat-container[_ngcontent-%COMP%]{z-index:1;opacity:1;position:-webkit-sticky;position:fixed;right:0!important;display:flex;align-self:flex-end;bottom:0;transform:translate(0);height:56px;width:350px;white-space:nowrap;text-align:right}app-chat[_ngcontent-%COMP%]{overflow-y:auto;z-index:1000;position:absolute;right:0}app-footer[_ngcontent-%COMP%]{z-index:0}.validation-container[_ngcontent-%COMP%]{margin-top:-15px!important;margin-bottom:15px!important}@media only screen and (min-height: 900px){.container-fluid[_ngcontent-%COMP%]{min-height:760px!important}}@media only screen and (min-height: 680px){.container-fluid[_ngcontent-%COMP%]{min-height:560px!important}}"]}),i})();var ne=p(456),ae=p(6360),s=p(6814);const m="user/Account",lt=(0,s.PH)(`[${m}] initial`),F=(0,s.PH)(`[${m}] getAccount`,(0,s.Ky)()),ct=(0,s.PH)(`[${m}] getAccountSuccess`,(0,s.Ky)()),O=(0,s.PH)(`[${m}] getAccountFailed`,(0,s.Ky)()),M=(0,s.PH)(`[${m}] getAccountSystemFailed`,(0,s.Ky)()),D=(0,s.PH)(`[${m}] editAccount`,(0,s.Ky)()),pt=(0,s.PH)(`[${m}] editAccountSuccess`,(0,s.Ky)()),L=(0,s.PH)(`[${m}] editAccountFailed`,(0,s.Ky)()),q=(0,s.PH)(`[${m}] editAccountSystemFailed`,(0,s.Ky)()),ut=(0,s.PH)(`[${m}] resetAccountFailed`),J=((0,s.G0)({initial:lt,getAccount:F,getAccountFailed:O,getAccountSystemFailed:M,editAccount:D,editAccountFailed:L,editAccountSystemFailed:q,resetAccount:ut}),(0,s.ZF)(m)),re=(0,s.P1)(J,i=>i.user),se=(0,s.P1)(J,i=>i.userReturn),le=(0,s.P1)(J,i=>i.messageCode),ce=(0,s.P1)(J,i=>i.error);var dt=p(8034),H=p(3848),St=p(5232),pe=p(6337);function ue(i,a){if(1&i&&t._UZ(0,"app-validation",32),2&i){const e=t.oxw();t.Q6J("formGroup",e.editformGroup_info)("formGroupControlName","userName")}}function de(i,a){if(1&i&&t._UZ(0,"app-validation",32),2&i){const e=t.oxw();t.Q6J("formGroup",e.editformGroup_info)("formGroupControlName","email")}}function me(i,a){if(1&i&&t._UZ(0,"app-validation",32),2&i){const e=t.oxw();t.Q6J("formGroup",e.editformGroup_info)("formGroupControlName","phoneNumber")}}function he(i,a){if(1&i&&t._UZ(0,"app-validation",32),2&i){const e=t.oxw();t.Q6J("formGroup",e.editformGroup_info)("formGroupControlName","address")}}function fe(i,a){if(1&i&&t._UZ(0,"app-validation",32),2&i){const e=t.oxw();t.Q6J("formGroup",e.editformGroup_info)("formGroupControlName","fullName")}}function ge(i,a){if(1&i&&t._UZ(0,"app-validation",32),2&i){const e=t.oxw();t.Q6J("formGroup",e.editformGroup_password)("formGroupControlName","password")}}function _e(i,a){if(1&i&&t._UZ(0,"app-validation",32),2&i){const e=t.oxw();t.Q6J("formGroup",e.editformGroup_password)("formGroupControlName","newPassword")}}function ve(i,a){if(1&i&&t._UZ(0,"app-validation",32),2&i){const e=t.oxw();t.Q6J("formGroup",e.editformGroup_password)("formGroupControlName","reNewPassword")}}let Ce=(()=>{class i{constructor(e,o,n,r,u,d){this.dialog=e,this.fb=o,this.store=n,this.messageService=r,this.tokenStorageService=u,this._route=d,this.isEditing=!0,this.isSubmittedInfo=!1,this.isSubmittedPassword=!1,this.id="",this.active=1,this.account={id:"",userName:"",phoneNumber:"",email:"",address:"",fullName:"",role:0},this.this_announce="",this.firstTime=!1,this.subscriptions=[],this.accountState=this.store.select(re),this.editAccountState=this.store.select(se),this.errorMessageState=this.store.select(le),this.errorSystemState=this.store.select(ce)}ngOnInit(){this.id=this.tokenStorageService.getUser().Id,this.editformGroup_info=this.fb.group({id:[this.id,l.kI.compose([l.kI.required])],userName:["",l.kI.compose([l.kI.required])],phoneNumber:["",l.kI.compose([l.kI.required,l.kI.minLength(8)])],email:["",l.kI.compose([l.kI.required])],address:["",l.kI.compose([l.kI.required])],role:[{value:0,disabled:!0},l.kI.compose([l.kI.required])],fullName:[0,l.kI.compose([l.kI.required])]}),this.editformGroup_password=this.fb.group({id:[this.id,l.kI.compose([l.kI.required])],password:["",l.kI.compose([l.kI.required])],newPassword:["",l.kI.compose([l.kI.required,l.kI.minLength(6)])],reNewPassword:["",l.kI.compose([l.kI.required,l.kI.minLength(6)])]}),this.subscriptions.push(this.accountState.subscribe(e=>{e&&(this.messageService.closeLoadingDialog(),this.account=e,this.editformGroup_info.controls.userName.setValue(e.userName),this.editformGroup_info.controls.phoneNumber.setValue(e.phoneNumber),this.editformGroup_info.controls.email.setValue(e.email),this.editformGroup_info.controls.address.setValue(e.address),this.editformGroup_info.controls.role.setValue(e.role),this.editformGroup_info.controls.fullName.setValue(e.fullName))})),this.subscriptions.push(this.editAccountState.subscribe(e=>{e&&(this.messageService.closeLoadingDialog(),this.messageService.openMessageNotifyDialog(e.messageCode))})),this.subscriptions.push(this.errorMessageState.subscribe(e=>{e&&(this.messageService.closeLoadingDialog(),this.messageService.closeAllDialog(),this.messageService.openMessageNotifyDialog(e.code))})),this.subscriptions.push(this.errorSystemState.subscribe(e=>{e&&""!==e&&null!==e&&(this.messageService.closeAllDialog(),this.messageService.openSystemFailNotifyDialog(e))})),this.store.dispatch(F({payload:{id:this.id}})),this.messageService.openLoadingDialog(),this.store.dispatch(lt())}ngOnDestroy(){console.log("Destroy"),this.store.dispatch(ut()),this.subscriptions.forEach(e=>e.unsubscribe())}formReset(){this.editformGroup_info.setValue({userName:this.account.userName??"",phoneNumber:this.account.phoneNumber??"",email:this.account.email??"",address:this.account.address??"",role:this.account.role??0,fullName:this.account.fullName??""})}formSubmit(){console.log(this.editformGroup_info.value)}formSubmit_edit_info(){if(0===this.active){if(this.isSubmittedInfo=!0,this.editformGroup_info.valid){const e={id:this.id,userName:this.editformGroup_info.value.userName,phoneNumber:this.editformGroup_info.value.phoneNumber,email:this.editformGroup_info.value.email,address:this.editformGroup_info.value.address,fullName:this.editformGroup_info.value.fullName,role:this.tokenStorageService.getUserRoleInNumber(),phase:""};this.messageService.openLoadingDialog(),this.store.dispatch(D({payload:e}))}}else if(1===this.active&&(this.isSubmittedPassword=!0,this.editformGroup_password.valid)){const e={userName:this.tokenStorageService.getUser().UserName,password:this.editformGroup_password.value.password,newPassword:this.editformGroup_password.value.newPassword,role:this.tokenStorageService.getUserRoleInNumber(),phase:"Password"};this.messageService.openLoadingDialog(),this.store.dispatch(D({payload:e}))}}changeIndex(e){this.active=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(k.uw),t.Y36(l.qu),t.Y36(s.yh),t.Y36(dt.e),t.Y36(nt.i),t.Y36(v.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-user-account-info"]],decls:101,vars:14,consts:[[1,"container",2,"padding","20px 0 20px"],[1,"outlet",2,"display","flex","justify-content","center","width","100%","flex-direction","column !important","background-color","white"],[1,"row",2,"display","flex","flex-direction","column !important","flex-wrap","1","padding-left","0 !important","margin-left","10px !important","margin-right","10px !important"],[1,"row"],["mat-form-label","",2,"font-weight","heavy"],[2,"background-color","white",3,"selectedIndexChange"],["label","Th\xf4ng tin t\xe0i kho\u1ea3n"],[3,"formGroup"],[1,"row",2,"margin-left","50px","margin-top","20px"],[1,"col-xs-12","col-sm-12","col-md-6","col-lg-6","edit-form"],["appearance","outline",1,"full-width-input"],["matInput","","fullwidth","","placeholder","Vd: B\u1ed3 C\xf4ng Anh","formControlName","userName",3,"disabled"],[1,"validation-container"],[3,"formGroup","formGroupControlName",4,"ngIf"],["matInput","","placeholder","Vd: abc@gmail.com","formControlName","email",3,"disabled"],["matInput","","placeholder","Vd: 0123456789","formControlName","phoneNumber"],["matInput","","placeholder","Vd: 43 Nguy\u1ec5n Ch\xed Thanh","formControlName","address"],["matNativeControl","","required","","formControlName","role"],["value","0"],["value","1"],["value","2"],["matInput","","placeholder","Vd: ABC","formControlName","fullName"],[1,"row",2,"padding-left","50px"],[2,"margin-right","20px"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn","type","button",3,"click"],["label","\u0110\u1ed5i m\u1eadt kh\u1ea9u"],["matInput","","fullwidth","","type","password","formControlName","password",3,"disabled"],["matInput","","type","password","formControlName","newPassword",3,"disabled"],["matInput","","type","password","formControlName","reNewPassword"],["label","Avatar"],[1,"row",2,"margin-left","50px"],[3,"formGroup","formGroupControlName"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),t._uU(5," Ch\u1ec9nh s\u1eeda th\xf4ng tin c\xe1 nh\xe2n "),t.qZA()(),t.TgZ(6,"mat-tab-group",5),t.NdJ("selectedIndexChange",function(r){return o.changeIndex(r)}),t.TgZ(7,"mat-tab",6)(8,"form",7)(9,"div",8)(10,"div",9)(11,"div",3)(12,"mat-form-field",10)(13,"mat-label"),t._uU(14,"T\xean t\xe0i kho\u1ea3n"),t.qZA(),t._UZ(15,"input",11),t.qZA(),t.TgZ(16,"div",12),t.YNc(17,ue,1,2,"app-validation",13),t.qZA()(),t.TgZ(18,"div",3)(19,"mat-form-field",10)(20,"mat-label"),t._uU(21,"Email li\xean l\u1ea1c"),t.qZA(),t._UZ(22,"input",14),t.qZA(),t.TgZ(23,"div",12),t.YNc(24,de,1,2,"app-validation",13),t.qZA()(),t.TgZ(25,"div",3)(26,"mat-form-field",10)(27,"mat-label"),t._uU(28,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i li\xean l\u1ea1c"),t.qZA(),t._UZ(29,"input",15),t.qZA(),t.TgZ(30,"div",12),t.YNc(31,me,1,2,"app-validation",13),t.qZA()()(),t.TgZ(32,"div",9)(33,"div",3)(34,"mat-form-field",10)(35,"mat-label"),t._uU(36,"\u0110\u1ecba ch\u1ec9 tr\u1ee5 s\u1edf"),t.qZA(),t._UZ(37,"input",16),t.qZA(),t.TgZ(38,"div",12),t.YNc(39,he,1,2,"app-validation",13),t.qZA()(),t.TgZ(40,"div",3)(41,"mat-form-field",10)(42,"mat-label"),t._uU(43,"Vai tr\xf2"),t.qZA(),t.TgZ(44,"select",17)(45,"option",18),t._uU(46,"M\u1edbi"),t.qZA(),t.TgZ(47,"option",19),t._uU(48,"Nh\xe2n vi\xean qu\u1ea3n l\xfd"),t.qZA(),t.TgZ(49,"option",20),t._uU(50,"Qu\u1ea3n l\xfd tr\u01b0\u1edfng"),t.qZA()()()(),t.TgZ(51,"div",3)(52,"mat-form-field",10)(53,"mat-label"),t._uU(54,"T\xean ng\u01b0\u1eddi d\xf9ng"),t.qZA(),t._UZ(55,"input",21),t.qZA(),t.TgZ(56,"div",12),t.YNc(57,fe,1,2,"app-validation",13),t.qZA()()()(),t.TgZ(58,"div",22)(59,"div",23)(60,"button",24),t.NdJ("click",function(){return o.formSubmit_edit_info()}),t._uU(61," L\u01b0u "),t.qZA()(),t.TgZ(62,"div")(63,"button",25),t.NdJ("click",function(){return o.formReset()}),t._uU(64," Kh\xf4i ph\u1ee5c "),t.qZA()()()()(),t.TgZ(65,"mat-tab",26)(66,"form",7)(67,"div",8)(68,"div",9)(69,"div",3)(70,"mat-form-field",10)(71,"mat-label"),t._uU(72,"M\u1eadt kh\u1ea9u c\u0169"),t.qZA(),t._UZ(73,"input",27),t.qZA(),t.TgZ(74,"div",12),t.YNc(75,ge,1,2,"app-validation",13),t.qZA()()(),t.TgZ(76,"div",9)(77,"div",3)(78,"mat-form-field",10)(79,"mat-label"),t._uU(80,"M\u1eadt kh\u1ea9u m\u1edbi"),t.qZA(),t._UZ(81,"input",28),t.qZA(),t.TgZ(82,"div",12),t.YNc(83,_e,1,2,"app-validation",13),t.qZA()(),t.TgZ(84,"div",3)(85,"mat-form-field",10)(86,"mat-label"),t._uU(87,"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u m\u1edbi"),t.qZA(),t._UZ(88,"input",29),t.qZA(),t.TgZ(89,"div",12),t.YNc(90,ve,1,2,"app-validation",13),t.qZA()()()(),t.TgZ(91,"div",22)(92,"div",23)(93,"button",24),t.NdJ("click",function(){return o.formSubmit_edit_info()}),t._uU(94," L\u01b0u "),t.qZA()(),t.TgZ(95,"div")(96,"button",25),t.NdJ("click",function(){return o.formReset()}),t._uU(97," Kh\xf4i ph\u1ee5c "),t.qZA()()()()(),t.TgZ(98,"mat-tab",30)(99,"div",31),t._UZ(100,"app-avatar-upload"),t.qZA()()()()()()),2&e){let n,r,u,d,_,b,y,N;t.xp6(8),t.Q6J("formGroup",o.editformGroup_info),t.xp6(7),t.Q6J("disabled",!0),t.xp6(2),t.Q6J("ngIf",(null==(n=o.editformGroup_info.get("userName"))?null:n.errors)&&((null==(n=o.editformGroup_info.get("userName"))?null:n.touched)||o.isSubmittedInfo)),t.xp6(5),t.Q6J("disabled",!0),t.xp6(2),t.Q6J("ngIf",(null==(r=o.editformGroup_info.get("email"))?null:r.errors)&&((null==(r=o.editformGroup_info.get("email"))?null:r.touched)||o.isSubmittedInfo)),t.xp6(7),t.Q6J("ngIf",(null==(u=o.editformGroup_info.get("phoneNumber"))?null:u.errors)&&((null==(u=o.editformGroup_info.get("phoneNumber"))?null:u.touched)||o.isSubmittedInfo)),t.xp6(8),t.Q6J("ngIf",(null==(d=o.editformGroup_info.get("address"))?null:d.errors)&&((null==(d=o.editformGroup_info.get("address"))?null:d.touched)||o.isSubmittedInfo)),t.xp6(18),t.Q6J("ngIf",(null==(_=o.editformGroup_info.get("fullName"))?null:_.errors)&&((null==(_=o.editformGroup_info.get("fullName"))?null:_.touched)||o.isSubmittedInfo)),t.xp6(9),t.Q6J("formGroup",o.editformGroup_password),t.xp6(7),t.Q6J("disabled",!0),t.xp6(2),t.Q6J("ngIf",(null==(b=o.editformGroup_password.get("password"))?null:b.errors)&&((null==(b=o.editformGroup_password.get("password"))?null:b.touched)||o.isSubmittedPassword)),t.xp6(6),t.Q6J("disabled",!0),t.xp6(2),t.Q6J("ngIf",(null==(y=o.editformGroup_password.get("newPassword"))?null:y.errors)&&((null==(y=o.editformGroup_password.get("newPassword"))?null:y.touched)||o.isSubmittedPassword)),t.xp6(7),t.Q6J("ngIf",(null==(N=o.editformGroup_password.get("reNewPassword"))?null:N.errors)&&((null==(N=o.editformGroup_password.get("reNewPassword"))?null:N.touched)||o.isSubmittedPassword))}},dependencies:[E.O5,H.uX,H.SP,at.Nt,G.KE,G.hX,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.Q7,l.sg,l.u,Z.lW,St.c,pe.j],styles:[".outlet[_ngcontent-%COMP%]{background-color:#fafafa;padding:30px 50px}.create-form[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:20px}.input-group[_ngcontent-%COMP%]{width:100%!important}.full-width-input[_ngcontent-%COMP%]{width:80%!important}  .mat-form-field-outline-start{border-radius:28px 0 0 28px!important;min-width:28px!important}  .mat-form-field-outline-end{border-radius:0 28px 28px 0!important;min-width:28px!important}  .mat-form-field-appearance-outline .mat-form-field-flex{padding:0 32px!important}"]}),i})();var mt=p(6308),At=p(8739);const h="user/receiptUserList",ht=(0,s.PH)(`[${h}] initial`),C=(0,s.PH)(`[${h}] getReceiptList`,(0,s.Ky)()),ft=(0,s.PH)(`[${h}] getReceiptListSuccess`,(0,s.Ky)()),Q=(0,s.PH)(`[${h}] getReceiptListFailed`,(0,s.Ky)()),Y=(0,s.PH)(`[${h}] getReceiptListSystemFailed`,(0,s.Ky)()),B=(0,s.PH)(`[${h}] deleteReceipt`,(0,s.Ky)()),gt=(0,s.PH)(`[${h}] deleteReceiptSuccess`,(0,s.Ky)()),z=(0,s.PH)(`[${h}] deleteReceiptFailed`,(0,s.Ky)()),K=(0,s.PH)(`[${h}] deleteReceiptSystemFailed`,(0,s.Ky)()),_t=(0,s.PH)(`[${h}] resetReceiptSystemFailed`),$=((0,s.G0)({initial:ht,getReceiptList:C,getReceiptListFailed:Q,getReceiptListSystemFailed:Y,deleteReceipt:B,deleteReceiptFailed:z,deleteReceiptSystemFailed:K,resetReceiptList:_t}),(0,s.ZF)(h)),xe=(0,s.P1)($,i=>i.hotelList),be=(0,s.P1)($,i=>i.deleteStatus),ye=(0,s.P1)($,i=>i.messageCode),Ee=(0,s.P1)($,i=>i.error);var vt=p(3233);const f="user/receiptUserInfo",Ct=(0,s.PH)(`[${f}] initial`),W=(0,s.PH)(`[${f}] getReceipt`,(0,s.Ky)()),xt=(0,s.PH)(`[${f}] getReceiptSuccess`,(0,s.Ky)()),V=(0,s.PH)(`[${f}] getReceiptFailed`,(0,s.Ky)()),j=(0,s.PH)(`[${f}] getReceiptSystemFailed`,(0,s.Ky)()),X=(0,s.PH)(`[${f}] editReceipt`,(0,s.Ky)()),bt=(0,s.PH)(`[${f}] editReceiptSuccess`,(0,s.Ky)()),tt=(0,s.PH)(`[${f}] editReceiptFailed`,(0,s.Ky)()),et=(0,s.PH)(`[${f}] editReceiptSystemFailed`,(0,s.Ky)()),yt=(0,s.PH)(`[${f}] resetReceiptFailed`),it=((0,s.G0)({initial:Ct,getReceipt:W,getReceiptFailed:V,getReceiptSystemFailed:j,editReceipt:X,editReceiptFailed:tt,editReceiptSystemFailed:et,resetReceipt:yt}),(0,s.ZF)(f)),Ne=(0,s.P1)(it,i=>i.hotel),Ze=(0,s.P1)(it,i=>i.hotelReturn),Te=(0,s.P1)(it,i=>i.messageCode),Se=(0,s.P1)(it,i=>i.error);var Ae=p(3238),Ue=p(4385);function we(i,a){if(1&i&&t._UZ(0,"app-validation",37),2&i){const e=t.oxw();t.Q6J("formGroup",e.editformGroup_info)("formGroupControlName","guestName")}}function ke(i,a){if(1&i&&t._UZ(0,"app-validation",37),2&i){const e=t.oxw();t.Q6J("formGroup",e.editformGroup_info)("formGroupControlName","email")}}function Ie(i,a){if(1&i&&t._UZ(0,"app-validation",37),2&i){const e=t.oxw();t.Q6J("formGroup",e.editformGroup_info)("formGroupControlName","phoneNumber")}}function Ge(i,a){if(1&i&&(t.TgZ(0,"mat-option",38),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.id),t.xp6(1),t.hij(" ",o.getDateFormat(e.startDate)," ")}}function De(i,a){if(1&i&&t._UZ(0,"app-validation",37),2&i){const e=t.oxw();t.Q6J("formGroup",e.editformGroup_info)("formGroupControlName","discountAmount")}}function Pe(i,a){if(1&i&&t._UZ(0,"app-validation",37),2&i){const e=t.oxw();t.Q6J("formGroup",e.editformGroup_info)("formGroupControlName","originalPrice")}}function Re(i,a){if(1&i&&t._UZ(0,"app-validation",37),2&i){const e=t.oxw();t.Q6J("formGroup",e.editformGroup_info)("formGroupControlName","totalTicket")}}function Fe(i,a){if(1&i&&t._UZ(0,"app-validation",37),2&i){const e=t.oxw();t.Q6J("formGroup",e.editformGroup_info)("formGroupControlName","totalChildTicket")}}function Oe(i,a){if(1&i&&t._UZ(0,"app-validation",37),2&i){const e=t.oxw();t.Q6J("formGroup",e.editformGroup_info)("formGroupControlName","discountFloat")}}function Me(i,a){if(1&i&&t._UZ(0,"app-validation",37),2&i){const e=t.oxw();t.Q6J("formGroup",e.editformGroup_info)("formGroupControlName","description")}}let Le=(()=>{class i{constructor(e,o,n,r,u,d,_){this.dialog=e,this.fb=o,this.store=n,this.messageService=r,this.http=u,this._route=d,this.data=_,this.isEditing=!0,this.isSubmitted=!1,this.receipt={fullReceiptId:"",totalReceiptId:"",guestName:"",tourishPlanId:"",totalTicket:0,totalChildTicket:0,originalPrice:0,discountFloat:0,discountAmount:0,description:"",status:0,createDate:"",completeDate:"",email:"",phoneNumber:""},this.this_announce="",this.firstTime=!1,this.subscriptions=[],this.receiptState=this.store.select(Ne),this.editReceiptState=this.store.select(Ze),this.errorMessageState=this.store.select(Te),this.errorSystemState=this.store.select(Se)}ngOnInit(){this.editformGroup_info=this.fb.group({fullReceiptId:[this.data.id],totalReceiptId:["",l.kI.compose([l.kI.required])],tourishScheduleId:["",l.kI.compose([l.kI.required])],guestName:["",l.kI.compose([l.kI.required])],phoneNumber:["",l.kI.compose([l.kI.required,l.kI.minLength(8)])],email:["",l.kI.compose([l.kI.required])],status:[0,l.kI.compose([l.kI.required])],totalTicket:[0,l.kI.compose([l.kI.required])],totalChildTicket:[0,l.kI.compose([l.kI.required])],originalPrice:[0,l.kI.compose([l.kI.required])],discountFloat:[0,l.kI.compose([l.kI.required])],discountAmount:[0,l.kI.compose([l.kI.required])],description:this.receipt.description}),this.subscriptions.push(this.receiptState.subscribe(e=>{e&&(this.receipt=e,this.messageService.closeLoadingDialog(),this.getTour(e.totalReceipt?.tourishPlanId),console.log(e.totalReceipt?.tourishPlanId),this.editformGroup_info.controls.totalReceiptId.setValue(e.totalReceiptId),this.editformGroup_info.controls.tourishScheduleId.setValue(e.tourishScheduleId),this.editformGroup_info.controls.guestName.setValue(e.guestName),this.editformGroup_info.controls.originalPrice.setValue(e.originalPrice),this.editformGroup_info.controls.email.setValue(e.email),this.editformGroup_info.controls.phoneNumber.setValue(e.phoneNumber),this.editformGroup_info.controls.status.setValue(e.status),this.editformGroup_info.controls.totalTicket.setValue(e.totalTicket),this.editformGroup_info.controls.totalChildTicket.setValue(e.totalChildTicket),this.editformGroup_info.controls.discountFloat.setValue(e.discountFloat),this.editformGroup_info.controls.discountAmount.setValue(e.discountAmount),this.editformGroup_info.controls.description.setValue(e.description))})),this.subscriptions.push(this.editReceiptState.subscribe(e=>{e&&(this.messageService.closeLoadingDialog(),this.messageService.openMessageNotifyDialog(e.messageCode))})),this.subscriptions.push(this.errorMessageState.subscribe(e=>{e&&(this.messageService.closeLoadingDialog(),this.messageService.closeAllDialog(),this.messageService.openMessageNotifyDialog(e.code))})),this.subscriptions.push(this.errorSystemState.subscribe(e=>{e&&(this.messageService.closeLoadingDialog(),this.messageService.openSystemFailNotifyDialog(e.message))})),this.store.dispatch(W({payload:{id:this.data.id}})),this.messageService.openLoadingDialog(),this.store.dispatch(Ct())}ngOnDestroy(){console.log("Destroy"),this.store.dispatch(yt()),this.subscriptions.forEach(e=>e.unsubscribe())}getTour(e){this.http.get("/api/GetTourishPlan/"+e).subscribe(o=>{this.tourishPlan=o.data})}formReset(){this.editformGroup_info.setValue({guestName:this.receipt.guestName??"",tourishPlanId:this.receipt.tourishPlanId??"",tourishScheduleId:this.receipt.tourishScheduleId??"",totalTicket:this.receipt.totalTicket??"",originalPrice:this.receipt.originalPrice??0,discountFloat:this.receipt.discountFloat??0,discountAmount:this.receipt.discountAmount??0,description:this.receipt.description??"",status:this.receipt.status??0,createDate:this.receipt.createDate??"",completeDate:this.receipt.completeDate??"",email:this.receipt.email??"",phoneNumber:this.receipt.phoneNumber??""})}formSubmit(){console.log(this.editformGroup_info.value)}formSubmit_edit_info(){if(this.isSubmitted=!0,console.log(this.editformGroup_info.value),this.editformGroup_info.valid){const e={totalReceiptId:this.receipt.totalReceiptId,fullReceiptId:this.data.id,guestName:this.editformGroup_info.value.guestName,tourishPlanId:this.editformGroup_info.value.tourishPlanId,tourishScheduleId:this.editformGroup_info.value.tourishScheduleId,totalTicket:this.editformGroup_info.value.totalTicket,totalChildTicket:this.editformGroup_info.value.totalChildTicket,originalPrice:this.editformGroup_info.value.originalPrice,discountFloat:this.editformGroup_info.value.discountFloat,discountAmount:this.editformGroup_info.value.discountAmount,email:this.editformGroup_info.value.email,phoneNumber:this.editformGroup_info.value.phoneNumber,description:this.editformGroup_info.value.description,status:parseInt(this.editformGroup_info.value.status)};this.store.dispatch(X({payload:e})),this.messageService.openLoadingDialog()}}saveInfomation(){this.dialog.open(vt.$,{data:{title:"B\u1ea1n c\xf3 mu\u1ed1n l\u01b0u l\u1ea1i kh\xf4ng?"}}).afterClosed().subscribe(o=>{this.formSubmit_edit_info()})}selectChangeReceipt(e){console.log(e),this.editformGroup_info.controls.tourishPlanId.setValue(e.data[0]),console.log(this.editformGroup_info.value)}closeDialog(){this.dialog.closeAll()}getDateFormat(e){const o=null!=e?e.toString()??"":"",n=new Date(o),r=n.getDate(),u=n.getMonth()+1;return n.getFullYear(),n.getHours(),n.getHours(),`Ng\xe0y ${r} th\xe1ng ${u}`}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(k.uw),t.Y36(l.qu),t.Y36(s.yh),t.Y36(dt.e),t.Y36(I.eN),t.Y36(v.gz),t.Y36(k.WI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-book-detail"]],decls:100,vars:14,consts:[[1,"container",2,"padding","0cqi 0 20px","max-height","600px"],[2,"background-color","#2a3650","padding","15px 50px 0px","width","100%","display","flex","flex-direction","row","justify-content","space-between","align-items","center"],["mat-form-label","",2,"font-weight","heavy","color","white"],["mat-button","",2,"color","white","margin-bottom","16px",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"outlet",2,"display","flex","justify-content","center","width","100%","flex-direction","column !important"],[1,"row",2,"display","flex","flex-direction","column !important","flex-wrap","1","padding-left","90px !important"],[3,"formGroup"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-6","col-lg-6","edit-form"],["appearance","outline",1,"full-width-input"],["matInput","","fullwidth","","placeholder","Vd: B\u1ed3 C\xf4ng Anh","formControlName","guestName"],[1,"validation-container"],[3,"formGroup","formGroupControlName",4,"ngIf"],["matInput","","placeholder","Vd: abc@gmail.com","formControlName","email"],["matInput","","placeholder","Vd: 0123456789","formControlName","phoneNumber"],["required","","formControlName","tourishScheduleId"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Vd: 10000","formControlName","discountAmount",3,"readonly"],["matInput","","placeholder","Vd: 180.000\u0111","formControlName","originalPrice",3,"readonly"],["matNativeControl","","required","","formControlName","status"],["value","0"],["value","1"],["value","2"],["value","3"],["type","number","matInput","","placeholder","Vd: 0123456789","formControlName","totalTicket"],["type","number","matInput","","placeholder","Vd: 0123456789","formControlName","totalChildTicket"],["matInput","","placeholder","Vd: 0.1","formControlName","discountFloat",3,"readonly"],[1,"row",2,"display","flex","flex-direction","column !important","flex-wrap","1"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12","edit-form"],[2,"width","90%"],["matInput","","id","description","placeholder","Th\xf4ng tin \u0111\xednh k\xe8m","formControlName","description","rows","10",1,"form-control"],[2,"margin-top","-20px","margin-bottom","10px"],[1,"row",2,"display","flex","flex-direction","row !important","flex-wrap","1","margin-top","30px"],[2,"margin-right","20px"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn","type","button",3,"click"],[3,"formGroup","formGroupControlName"],[3,"value"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._uU(3," Ch\u1ec9nh s\u1eeda th\xf4ng tin h\xf3a \u0111\u01a1n "),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return o.closeDialog()}),t._UZ(5,"i",4),t.qZA()(),t.TgZ(6,"div",5)(7,"div",6)(8,"form",7)(9,"div",8)(10,"div",9)(11,"div",8)(12,"mat-form-field",10)(13,"mat-label"),t._uU(14,"T\xean kh\xe1ch h\xe0ng"),t.qZA(),t._UZ(15,"input",11),t.qZA(),t.TgZ(16,"div",12),t.YNc(17,we,1,2,"app-validation",13),t.qZA()(),t.TgZ(18,"div",8)(19,"mat-form-field",10)(20,"mat-label"),t._uU(21,"Email li\xean l\u1ea1c"),t.qZA(),t._UZ(22,"input",14),t.qZA(),t.TgZ(23,"div",12),t.YNc(24,ke,1,2,"app-validation",13),t.qZA()(),t.TgZ(25,"div",8)(26,"mat-form-field",10)(27,"mat-label"),t._uU(28,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i li\xean l\u1ea1c"),t.qZA(),t._UZ(29,"input",15),t.qZA(),t.TgZ(30,"div",12),t.YNc(31,Ie,1,2,"app-validation",13),t.qZA()(),t.TgZ(32,"div",8)(33,"mat-form-field",10)(34,"mat-label"),t._uU(35,"L\u1ecbch tr\xecnh"),t.qZA(),t.TgZ(36,"mat-select",16),t.YNc(37,Ge,2,2,"mat-option",17),t.qZA()()(),t.TgZ(38,"div",8)(39,"mat-form-field",10)(40,"mat-label"),t._uU(41,"Gi\u1ea3m gi\xe1 d\u1ecbch v\u1ee5 (Tr\u1eeb v\xe0o gi\xe1 tr\u1ecb)"),t.qZA(),t._UZ(42,"input",18),t.qZA(),t.TgZ(43,"div",12),t.YNc(44,De,1,2,"app-validation",13),t.qZA()()(),t.TgZ(45,"div",9)(46,"div",8)(47,"mat-form-field",10)(48,"mat-label"),t._uU(49,"Gi\xe1 g\u1ed1c"),t.qZA(),t._UZ(50,"input",19),t.qZA(),t.TgZ(51,"div",12),t.YNc(52,Pe,1,2,"app-validation",13),t.qZA()(),t.TgZ(53,"div",8)(54,"mat-form-field",10)(55,"mat-label"),t._uU(56,"Tr\u1ea1ng th\xe1i \u0111\u01a1n"),t.qZA(),t.TgZ(57,"select",20)(58,"option",21),t._uU(59,"M\u1edbi t\u1ea1o"),t.qZA(),t.TgZ(60,"option",22),t._uU(61,"Ch\u1edd thanh to\xe1n"),t.qZA(),t.TgZ(62,"option",23),t._uU(63,"Thanh to\xe1n th\xe0nh c\xf4ng"),t.qZA(),t.TgZ(64,"option",24),t._uU(65,"H\u1ee7y"),t.qZA()()()(),t.TgZ(66,"div",8)(67,"mat-form-field",10)(68,"mat-label"),t._uU(69,"S\u1ed1 v\xe9 (Ng\u01b0\u1eddi l\u1edbn > 10 tu\u1ed5i)"),t.qZA(),t._UZ(70,"input",25),t.qZA(),t.TgZ(71,"div",12),t.YNc(72,Re,1,2,"app-validation",13),t.qZA()(),t.TgZ(73,"div",8)(74,"mat-form-field",10)(75,"mat-label"),t._uU(76,"S\u1ed1 v\xe9 (Tr\u1ebb em)"),t.qZA(),t._UZ(77,"input",26),t.qZA(),t.TgZ(78,"div",12),t.YNc(79,Fe,1,2,"app-validation",13),t.qZA()(),t.TgZ(80,"div",8)(81,"mat-form-field",10)(82,"mat-label"),t._uU(83,"Gi\u1ea3m gi\xe1 d\u1ecbch v\u1ee5 (Tr\u1eeb theo %)"),t.qZA(),t._UZ(84,"input",27),t.qZA(),t.TgZ(85,"div",12),t.YNc(86,Oe,1,2,"app-validation",13),t.qZA()()()(),t.TgZ(87,"div",28)(88,"div",29)(89,"mat-form-field",30),t._UZ(90,"textarea",31),t.qZA(),t.TgZ(91,"div",32),t.YNc(92,Me,1,2,"app-validation",13),t.qZA()()(),t.TgZ(93,"div",33)(94,"div",34)(95,"button",35),t.NdJ("click",function(){return o.saveInfomation()}),t._uU(96," L\u01b0u "),t.qZA()(),t.TgZ(97,"div")(98,"button",36),t.NdJ("click",function(){return o.formReset()}),t._uU(99," Kh\xf4i ph\u1ee5c "),t.qZA()()()()()()()),2&e){let n,r,u,d,_,b,y,N,ot;t.xp6(8),t.Q6J("formGroup",o.editformGroup_info),t.xp6(9),t.Q6J("ngIf",(null==(n=o.editformGroup_info.get("guestName"))?null:n.errors)&&((null==(n=o.editformGroup_info.get("guestName"))?null:n.touched)||o.isSubmitted)),t.xp6(7),t.Q6J("ngIf",(null==(r=o.editformGroup_info.get("email"))?null:r.errors)&&((null==(r=o.editformGroup_info.get("email"))?null:r.touched)||o.isSubmitted)),t.xp6(7),t.Q6J("ngIf",(null==(u=o.editformGroup_info.get("phoneNumber"))?null:u.errors)&&((null==(u=o.editformGroup_info.get("phoneNumber"))?null:u.touched)||o.isSubmitted)),t.xp6(6),t.Q6J("ngForOf",null==o.tourishPlan?null:o.tourishPlan.tourishScheduleList),t.xp6(5),t.Q6J("readonly",!0),t.xp6(2),t.Q6J("ngIf",(null==(d=o.editformGroup_info.get("discountAmount"))?null:d.errors)&&((null==(d=o.editformGroup_info.get("discountAmount"))?null:d.touched)||o.isSubmitted)),t.xp6(6),t.Q6J("readonly",!0),t.xp6(2),t.Q6J("ngIf",(null==(_=o.editformGroup_info.get("originalPrice"))?null:_.errors)&&((null==(_=o.editformGroup_info.get("originalPrice"))?null:_.touched)||o.isSubmitted)),t.xp6(20),t.Q6J("ngIf",(null==(b=o.editformGroup_info.get("totalTicket"))?null:b.errors)&&((null==(b=o.editformGroup_info.get("totalTicket"))?null:b.touched)||o.isSubmitted)),t.xp6(7),t.Q6J("ngIf",(null==(y=o.editformGroup_info.get("totalChildTicket"))?null:y.errors)&&((null==(y=o.editformGroup_info.get("totalChildTicket"))?null:y.touched)||o.isSubmitted)),t.xp6(5),t.Q6J("readonly",!0),t.xp6(2),t.Q6J("ngIf",(null==(N=o.editformGroup_info.get("discountFloat"))?null:N.errors)&&((null==(N=o.editformGroup_info.get("discountFloat"))?null:N.touched)||o.isSubmitted)),t.xp6(6),t.Q6J("ngIf",(null==(ot=o.editformGroup_info.get("description"))?null:ot.errors)&&((null==(ot=o.editformGroup_info.get("description"))?null:ot.touched)||o.isSubmitted))}},dependencies:[E.sg,E.O5,at.Nt,G.KE,G.hX,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l.JJ,l.JL,l.Q7,l.sg,l.u,Ae.ey,Z.lW,Ue.gD,St.c],styles:[".outlet[_ngcontent-%COMP%]{background-color:#fafafa;padding:30px 50px 0}.create-form[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:20px}.input-group[_ngcontent-%COMP%]{width:100%!important}.full-width-input[_ngcontent-%COMP%]{width:80%!important}  .mat-form-field-outline-start{border-radius:28px 0 0 28px!important;min-width:28px!important}  .mat-form-field-outline-end{border-radius:0 28px 28px 0!important;min-width:28px!important}  .mat-form-field-appearance-outline .mat-form-field-flex{padding:0 32px!important}"]}),i})();var T=p(7340),x=p(3626),qe=p(7392),Et=p(3546);function Je(i,a){1&i&&(t.TgZ(0,"th",33),t._uU(1," No. "),t.qZA())}function He(i,a){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.hij(" ",o.getIndex(e.id)," ")}}function Qe(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1," T\xean tour "),t.qZA())}function Ye(i,a){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.tourishPlan.tourName," ")}}function Be(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1,"Gi\xe1 \u0111\u01a1n v\xe9"),t.qZA())}function ze(i,a){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.hij(" ",o.getTotalPrice(e.tourishPlan)," ")}}function Ke(i,a){1&i&&(t.TgZ(0,"th",37),t._uU(1," T\u1ed5ng s\u1ed1 v\xe9 "),t.qZA())}function $e(i,a){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.tourishPlan.totalTicket," ")}}function We(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1," S\u1ed1 v\xe9 c\xf2n l\u1ea1i "),t.qZA())}function Ve(i,a){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.tourishPlan.remainTicket," ")}}function je(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1," Ng\xe0y t\u1ea1o "),t.qZA())}function Xe(i,a){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.createdDate)}}function ti(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1," Ng\xe0y k\xeat th\xfac "),t.qZA())}function ei(i,a){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.completeDate)}}function ii(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1," \xa0 "),t.qZA())}function oi(i,a){1&i&&(t.TgZ(0,"mat-icon"),t._uU(1,"keyboard_arrow_down"),t.qZA())}function ni(i,a){1&i&&(t.TgZ(0,"mat-icon"),t._uU(1,"keyboard_arrow_up"),t.qZA())}function ai(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",34)(1,"button",42),t.NdJ("click",function(n){const u=t.CHM(e).$implicit,d=t.oxw();return d.expandedElement=d.expandedElement===u?null:u,t.KtG(n.stopPropagation())}),t.YNc(2,oi,2,0,"mat-icon",43),t.YNc(3,ni,2,0,"mat-icon",43),t.qZA()()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(2),t.Q6J("ngIf",o.expandedElement!==e),t.xp6(1),t.Q6J("ngIf",o.expandedElement===e)}}function ri(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",46)(1,"div",47)(2,"span",48),t._uU(3,"STT"),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.qZA()(),t.TgZ(6,"div",47)(7,"span",48),t._uU(8,"T\xean kh\xe1ch"),t.qZA(),t.TgZ(9,"div"),t._uU(10),t.qZA()(),t.TgZ(11,"div",47)(12,"span",48),t._uU(13,"Email"),t.qZA(),t.TgZ(14,"div"),t._uU(15),t.qZA()(),t.TgZ(16,"div",47)(17,"span",48),t._uU(18,"S\u0110T"),t.qZA(),t.TgZ(19,"div"),t._uU(20),t.qZA()(),t.TgZ(21,"div",47)(22,"span",48),t._uU(23,"S\u1ed1 v\xe9 (Ng\u01b0\u1eddi l\u1edbn > 10 tu\u1ed5i)"),t.qZA(),t.TgZ(24,"div"),t._uU(25),t.qZA()(),t.TgZ(26,"div",47)(27,"span",48),t._uU(28,"S\u1ed1 v\xe9 (Tr\u1ebb em)"),t.qZA(),t.TgZ(29,"div"),t._uU(30),t.qZA()(),t.TgZ(31,"div",47)(32,"span",48),t._uU(33,"T\u1ed5ng gi\xe1"),t.qZA(),t.TgZ(34,"div"),t._uU(35),t.qZA()(),t.TgZ(36,"div",49)(37,"button",50),t.NdJ("click",function(){const r=t.CHM(e).$implicit,u=t.oxw(2);return t.KtG(u.openEditDialog(r.fullReceiptId))}),t._uU(38," Edit "),t.qZA()(),t.TgZ(39,"div",49)(40,"button",50),t.NdJ("click",function(){const r=t.CHM(e).$implicit,u=t.oxw(2);return t.KtG(u.openDeleteDialog(r.fullReceiptId))}),t._uU(41," Delete "),t.qZA()()()}if(2&i){const e=a.$implicit,o=a.index,n=t.oxw().$implicit,r=t.oxw();t.xp6(5),t.Oqu(o+1),t.xp6(5),t.Oqu(e.guestName),t.xp6(5),t.Oqu(e.email),t.xp6(5),t.Oqu(e.phoneNumber),t.xp6(5),t.Oqu(e.totalTicket),t.xp6(5),t.Oqu(e.totalChildTicket),t.xp6(5),t.hij(" ",r.getTotalPriceReceipt(n.tourishPlan,e)," \u0111 ")}}function si(i,a){if(1&i&&(t.TgZ(0,"td",34)(1,"div",44),t.YNc(2,ri,42,7,"div",45),t.qZA()()),2&i){const e=a.$implicit,o=t.oxw();t.uIk("colspan",o.displayedColumnsWithExpand.length),t.xp6(1),t.Q6J("@detailExpand",e==o.expandedElement?"expanded":"collapsed"),t.xp6(1),t.Q6J("ngForOf",e.fullReceiptList)}}function li(i,a){1&i&&t._UZ(0,"tr",51)}function ci(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr",52),t.NdJ("click",function(){const r=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.expandedElement=u.expandedElement===r?null:r)}),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.ekj("example-expanded-row",o.expandedElement===e)}}function pi(i,a){1&i&&t._UZ(0,"tr",53)}const ui=function(){return["expandedDetail"]};let di=(()=>{class i{constructor(e,o,n,r){this.dialog=e,this.messageService=o,this.store=n,this.tokenStorageService=r,this.subscriptions=[],this.isExpansionDetailRow=(u,d)=>d.hasOwnProperty("detailRow"),this.active=0,this.displayedColumns=["id","tourName","singlePrice","totalTicketAll","remainTicket","createDate","completeDate"],this.displayedColumnsWithExpand=[...this.displayedColumns,"expand"],this.clickedRows=new Set,this.length=0,this.pageSize=5,this.pageSizeOpstion=[5,10],this.pageIndex=0,this.sortColumn="createdDate",this.sortDirection="desc",this.tourishPlanId="",this.receiptListState=this.store.select(xe),this.receiptDeleteState=this.store.select(be),this.errorMessageState=this.store.select(ye),this.errorSystemState=this.store.select(Ee)}ngOnInit(){this.subscriptions.push(this.receiptListState.subscribe(o=>{o&&(this.messageService.closeLoadingDialog(),this.receiptList=o.data,this.length=o.count)})),this.subscriptions.push(this.receiptDeleteState.subscribe(o=>{if(o&&(console.log("abc: ",o),this.messageService.openMessageNotifyDialog(o.messageCode),this.messageService.closeLoadingDialog(),0===o.resultCd)){const n=this.tokenStorageService.getUser().email;this.store.dispatch(C({payload:{email:n,page:this.pageIndex+1,pageSize:this.pageSize,tourishPlanId:this.tourishPlanId,status:this.active,sortBy:this.sortColumn,sortDirection:this.sortDirection}})),this.messageService.openLoadingDialog()}})),this.store.dispatch(ht());const e=this.tokenStorageService.getUser().email;this.store.dispatch(C({payload:{email:e,page:this.pageIndex+1,pageSize:this.pageSize,tourishPlanId:this.tourishPlanId,status:this.active,sortBy:this.sortColumn,sortDirection:this.sortDirection}})),this.messageService.openLoadingDialog(),this.subscriptions.push(this.errorMessageState.subscribe(o=>{o&&(this.messageService.closeLoadingDialog(),this.messageService.closeAllDialog(),this.messageService.openMessageNotifyDialog(o.code))})),this.subscriptions.push(this.errorSystemState.subscribe(o=>{o&&""!==o&&null!==o&&(this.messageService.closeLoadingDialog(),this.messageService.openSystemFailNotifyDialog(o))}))}ngAfterViewInit(){}ngOnDestroy(){this.store.dispatch(_t()),this.messageService.closeAllDialog(),this.subscriptions.forEach(e=>e.unsubscribe())}openEditDialog(e){this.dialog.open(Le,{data:{id:e}}).afterClosed().subscribe(n=>{console.log(n);const r=this.tokenStorageService.getUser().email;this.store.dispatch(C({payload:{email:r,page:this.pageIndex+1,pageSize:this.pageSize,tourishPlanId:this.tourishPlanId,status:this.active,sortBy:this.sortColumn,sortDirection:this.sortDirection}})),this.messageService.openLoadingDialog()})}openConfirmDialog(e){var o=this;return(0,S.Z)(function*(){yield o.dialog.open(vt.$,{data:{title:e}}).afterClosed().subscribe(r=>r)})()}openDeleteDialog(e){this.dialog.open(vt.$,{data:{title:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a \u0111\u1ed1i t\xe1c n\xe0y kh\xf4ng?"}}).afterClosed().subscribe(n=>{n&&(this.store.dispatch(B({payload:{id:e}})),this.messageService.openLoadingDialog())})}addData(){console.log("abc")}tourStatusChange(e){this.pageIndex=0,this.store.dispatch(C({payload:{page:this.pageIndex+1,pageSize:this.pageSize,status:e,tourishPlanId:this.tourishPlanId,sortBy:this.sortColumn,sortDirection:this.sortDirection}})),this.messageService.openLoadingDialog()}getTotalPriceReceipt(e,o){let n=0;return e.stayingSchedules?.forEach(r=>{n+=r.singlePrice??0}),e.eatSchedules?.forEach(r=>{n+=r.singlePrice??0}),e.movingSchedules?.forEach(r=>{n+=r.singlePrice??0}),n=(n-o.discountAmount)*o.totalTicket*(1-o.discountFloat),Math.floor(n)}getTotalPrice(e){let o=0;return e.stayingSchedules?.forEach(n=>{o+=n.singlePrice??0}),e.eatSchedules?.forEach(n=>{o+=n.singlePrice??0}),e.movingSchedules?.forEach(n=>{o+=n.singlePrice??0}),o}handlePageEvent(e){this.pageSize=e.pageSize,this.pageIndex=e.pageIndex;const o=this.tokenStorageService.getUser().email;this.store.dispatch(C({payload:{email:o,page:this.pageIndex+1,pageSize:this.pageSize,tourishPlanId:this.tourishPlanId,status:this.active,sortBy:this.sortColumn,sortDirection:this.sortDirection}})),this.messageService.openLoadingDialog()}selectChangeReceipt(e){const o=this.tokenStorageService.getUser().email;this.tourishPlanId=e.data[0],this.store.dispatch(C({payload:{email:o,page:this.pageIndex+1,pageSize:this.pageSize,tourishPlanId:e.data[0],status:this.active,sortBy:this.sortColumn,sortDirection:this.sortDirection}})),this.messageService.openLoadingDialog()}announceSortChange(e){this.pageIndex=0,this.sortColumn=e.active,this.sortDirection=e.direction,this.messageService.openLoadingDialog(),this.store.dispatch(C({payload:{page:1,pageSize:this.pageSize,tourishPlanId:this.tourishPlanId,sortBy:e.active,sortDirection:e.direction,status:this.active}}))}getIndex(e){return this.receiptList.findIndex(o=>o.totalReceiptId===e)+1}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(k.uw),t.Y36(dt.e),t.Y36(s.yh),t.Y36(nt.i))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-receiptList"]],viewQuery:function(e,o){if(1&e&&(t.Gf(At.NW,5),t.Gf(mt.YE,5)),2&e){let n;t.iGM(n=t.CRH())&&(o.paraginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},decls:44,vars:7,consts:[[1,"container-fluid",2,"width","100%","padding-top","0px !important"],[2,"width","100% !important"],[2,"margin-bottom","20px","padding","10px 10px 10px"],[1,"outlet",2,"width","100%","flex-direction","column !important","background-color","white","padding-top","2%","padding-left","2%"],[2,"background-color","white",3,"selectedIndexChange"],["label","Tour m\u1edbi t\u1ea1o"],["label","Tour \u0111ang ho\u1ea1t \u0111\u1ed9ng"],["label","Tour \u0111\xe3 ho\xe0n th\xe0nh"],["label","Tour \u0111\xe3 h\u1ee7y"],[1,"table-responsive"],["mat-table","","matSort","","multiTemplateDataRows","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by id",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","tourName"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by tourName",4,"matHeaderCellDef"],["matColumnDef","singlePrice"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","totalTicketAll"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by totalTicketAll",4,"matHeaderCellDef"],["matColumnDef","remainTicket"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by remainTicket",4,"matHeaderCellDef"],["matColumnDef","createDate"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by createDate",4,"matHeaderCellDef"],["matColumnDef","completeDate"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by completeDate",4,"matHeaderCellDef"],["matColumnDef","expand"],["mat-header-cell","","aria-label","row actions",4,"matHeaderCellDef"],["matColumnDef","expandedDetail",2,"width","100% !important"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions","length","page"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by id"],["mat-cell",""],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by tourName"],["mat-header-cell","","mat-sort-header",""],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by totalTicketAll"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by remainTicket"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by createDate"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by completeDate"],["mat-header-cell","","aria-label","row actions"],["mat-icon-button","","aria-label","expand row",3,"click"],[4,"ngIf"],[2,"margin-left","auto"],["class","example-element-diagram","style","display: flex; flex-direction: row",4,"ngFor","ngForOf"],[1,"example-element-diagram",2,"display","flex","flex-direction","row"],[1,"receipt-info"],[2,"font-weight","bold"],[1,"receipt-button"],["mat-button","",3,"click"],["mat-header-row",""],["mat-row","",1,"example-element-row",3,"click"],["mat-row","",1,"example-detail-row"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-header")(4,"mat-card-title"),t._uU(5,"Danh s\xe1ch tour \u0111\xe3 \u0111\u1eb7t"),t.qZA()()(),t._UZ(6,"div",3),t.TgZ(7,"mat-tab-group",4),t.NdJ("selectedIndexChange",function(r){return o.tourStatusChange(r)}),t._UZ(8,"mat-tab",5)(9,"mat-tab",6)(10,"mat-tab",7)(11,"mat-tab",8),t.qZA(),t.TgZ(12,"div",9)(13,"table",10),t.NdJ("matSortChange",function(r){return o.announceSortChange(r)}),t.ynx(14,11),t.YNc(15,Je,2,0,"th",12),t.YNc(16,He,2,1,"td",13),t.BQk(),t.ynx(17,14),t.YNc(18,Qe,2,0,"th",15),t.YNc(19,Ye,2,1,"td",13),t.BQk(),t.ynx(20,16),t.YNc(21,Be,2,0,"th",17),t.YNc(22,ze,2,1,"td",13),t.BQk(),t.ynx(23,18),t.YNc(24,Ke,2,0,"th",19),t.YNc(25,$e,2,1,"td",13),t.BQk(),t.ynx(26,20),t.YNc(27,We,2,0,"th",21),t.YNc(28,Ve,2,1,"td",13),t.BQk(),t.ynx(29,22),t.YNc(30,je,2,0,"th",23),t.YNc(31,Xe,2,1,"td",13),t.BQk(),t.ynx(32,24),t.YNc(33,ti,2,0,"th",25),t.YNc(34,ei,2,1,"td",13),t.BQk(),t.ynx(35,26),t.YNc(36,ii,2,0,"th",27),t.YNc(37,ai,4,2,"td",13),t.BQk(),t.ynx(38,28),t.YNc(39,si,3,3,"td",13),t.BQk(),t.YNc(40,li,1,0,"tr",29),t.YNc(41,ci,1,2,"tr",30),t.YNc(42,pi,1,0,"tr",31),t.qZA()(),t.TgZ(43,"mat-paginator",32),t.NdJ("page",function(r){return o.handlePageEvent(r)}),t.qZA()()()),2&e&&(t.xp6(13),t.Q6J("dataSource",o.receiptList),t.xp6(27),t.Q6J("matHeaderRowDef",o.displayedColumnsWithExpand),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumnsWithExpand),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(6,ui)),t.xp6(1),t.Q6J("pageSizeOptions",o.pageSizeOpstion)("length",o.length))},dependencies:[E.sg,E.O5,H.uX,H.SP,x.BZ,x.fO,x.as,x.w1,x.Dz,x.nj,x.ge,x.ev,x.XQ,x.Gk,At.NW,mt.YE,mt.nU,qe.Hw,Z.lW,Z.RK,Et.a8,Et.dk,Et.n5],styles:[".addContainer[_ngcontent-%COMP%]{margin-bottom:15px}.table-responsive[_ngcontent-%COMP%]{display:block;width:100%;overflow-x:auto}.element-row[_ngcontent-%COMP%]{position:relative}tr.example-detail-row[_ngcontent-%COMP%]{height:0}.element-row[_ngcontent-%COMP%]:not(.expanded){cursor:pointer}.element-row[_ngcontent-%COMP%]:not(.expanded):hover{background:#f5f5f5}.element-row.expanded[_ngcontent-%COMP%]{border-bottom-color:transparent}.receipt-info[_ngcontent-%COMP%]{padding:20px 20px 0;min-width:160px;text-wrap:wrap}.receipt-button[_ngcontent-%COMP%]{padding:20px 20px 0;width:70px;text-wrap:wrap}.receipt-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-wrap:wrap}"],data:{animation:[(0,T.X$)("detailExpand",[(0,T.SB)("collapsed",(0,T.oB)({height:"0px",minHeight:"0"})),(0,T.SB)("expanded",(0,T.oB)({height:"*"})),(0,T.eR)("expanded <=> collapsed",(0,T.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),i})();var mi=p(6208),hi=p(7267),fi=p(6611),gi=p(8563);const _i=[{path:"",component:oe,children:[{path:"tour/:id/detail",component:ne.C},{path:"main-page",component:ae.B},{path:"account/info",component:Ce},{path:"receipt/list",component:di},{path:"search-page",component:hi.h},{path:"service-search-page",component:fi._},{path:"service/:id/detail",component:gi.U},{path:"**",pathMatch:"full",component:mi.w}]}];let vi=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[E.ez,v.Bz.forChild(_i),v.Bz]}),i})();var c=p(9507),A=p(9646),g=p(4004),U=p(3900),w=p(262);let Ci=(()=>{class i{constructor(e){this.http=e}getAccount(e){return this.http.post("/api/User/SelfGetUser",null,{params:e})}editAccount(e){return console.log("ok"),this.http.post("/api/User/Update"+e.phase,e)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(I.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),xi=(()=>{class i{constructor(e,o){this.action=e,this.storeService=o,this.getAccount=(0,c.GW)(()=>this.action.pipe((0,c.l4)(F),(0,g.U)(n=>n.payload),(0,U.w)(n=>this.storeService.getAccount(n).pipe((0,g.U)(r=>0===r.resultCd?ct({response:r}):O({response:r})),(0,w.K)(r=>(0,A.of)(M({error:r}))))))),this.getAccountSuccess=(0,c.GW)(()=>this.action.pipe((0,c.l4)(ct)),{dispatch:!1}),this.getAccountFailed=(0,c.GW)(()=>this.action.pipe((0,c.l4)(O)),{dispatch:!1}),this.getAccountSystemFailed=(0,c.GW)(()=>this.action.pipe((0,c.l4)(M)),{dispatch:!1}),this.editAccount=(0,c.GW)(()=>this.action.pipe((0,c.l4)(D),(0,g.U)(n=>n.payload),(0,U.w)(n=>this.storeService.editAccount(n).pipe((0,g.U)(r=>(console.log("abcd",r),0===r.resultCd?(console.log(r),pt({response:r})):L({response:r}))),(0,w.K)(r=>(0,A.of)(q({error:r}))))))),this.editAccountSuccess=(0,c.GW)(()=>this.action.pipe((0,c.l4)(pt)),{dispatch:!1}),this.editAccountFailed=(0,c.GW)(()=>this.action.pipe((0,c.l4)(L)),{dispatch:!1}),this.editAccountSystemFailed=(0,c.GW)(()=>this.action.pipe((0,c.l4)(q)),{dispatch:!1})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(c.eX),t.LFG(Ci))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();const Ut={user:null,resultCd:0,userReturn:null},bi=(0,s.Lq)(Ut,(0,s.on)(lt,i=>({...i,initialState:Ut})),(0,s.on)(F,(i,{})=>({...i})),(0,s.on)(ct,(i,{response:a})=>({...i,user:a.data})),(0,s.on)(O,(i,{response:a})=>({...i,messageCode:{code:a.messageCode}})),(0,s.on)(M,(i,{error:a})=>({...i,error:{message:a}})),(0,s.on)(D,(i,{})=>({...i})),(0,s.on)(pt,(i,{response:a})=>({...i,userReturn:a})),(0,s.on)(L,(i,{response:a})=>({...i,messageCode:{code:a.messageCode}})),(0,s.on)(q,(i,{error:a})=>({...i,error:{message:a}})),(0,s.on)(ut,i=>({...i,user:null,userReturn:null}))),wt={pageNumber:0,pageOffset:0,hotelList:[],deleteStatus:null,resultCd:0},yi=(0,s.Lq)(wt,(0,s.on)(ht,i=>({...i,initialState:wt})),(0,s.on)(C,(i,{})=>({...i})),(0,s.on)(ft,(i,{response:a})=>({...i,hotelList:a})),(0,s.on)(Q,(i,{response:a})=>({...i,messageCode:{code:a.messageCode}})),(0,s.on)(Y,(i,{error:a})=>({...i,error:{message:a}})),(0,s.on)(B,(i,{})=>({...i})),(0,s.on)(gt,(i,{response:a})=>({...i,deleteStatus:a})),(0,s.on)(z,(i,{response:a})=>({...i,messageCode:{code:a.messageCode}})),(0,s.on)(K,(i,{error:a})=>({...i,error:{message:a}})),(0,s.on)(_t,i=>({...i,pageNumber:0,pageOffset:0,hotelList:[],deleteStatus:null}))),kt={hotel:null,resultCd:0,hotelReturn:null},Ei=(0,s.Lq)(kt,(0,s.on)(Ct,i=>({...i,initialState:kt})),(0,s.on)(W,(i,{})=>({...i})),(0,s.on)(xt,(i,{response:a})=>({...i,hotel:a.data})),(0,s.on)(V,(i,{response:a})=>({...i,messageCode:{code:a.messageCode}})),(0,s.on)(j,(i,{error:a})=>({...i,error:{message:a}})),(0,s.on)(X,(i,{})=>({...i})),(0,s.on)(bt,(i,{response:a})=>({...i,hotelReturn:a})),(0,s.on)(tt,(i,{response:a})=>({...i,messageCode:{code:a.messageCode}})),(0,s.on)(et,(i,{error:a})=>({...i,error:{message:a}})),(0,s.on)(yt,i=>({...i,hotel:null,hotelReturn:null})));let Ni=(()=>{class i{constructor(e){this.http=e}getReceipt(e){return this.http.get("/api/GetFullReceipt/"+e.id)}editReceipt(e){return console.log("ok"),this.http.put("/api/UpdateReceipt/user/"+e.fullReceiptId,e)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(I.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Zi=(()=>{class i{constructor(e,o){this.action=e,this.storeService=o,this.getReceipt=(0,c.GW)(()=>this.action.pipe((0,c.l4)(W),(0,g.U)(n=>n.payload),(0,U.w)(n=>this.storeService.getReceipt(n).pipe((0,g.U)(r=>0===r.resultCd?xt({response:r}):V({response:r})),(0,w.K)(r=>(0,A.of)(j({error:r}))))))),this.getReceiptSuccess=(0,c.GW)(()=>this.action.pipe((0,c.l4)(xt)),{dispatch:!1}),this.getReceiptFailed=(0,c.GW)(()=>this.action.pipe((0,c.l4)(V)),{dispatch:!1}),this.getReceiptSystemFailed=(0,c.GW)(()=>this.action.pipe((0,c.l4)(j)),{dispatch:!1}),this.editReceipt=(0,c.GW)(()=>this.action.pipe((0,c.l4)(X),(0,g.U)(n=>n.payload),(0,U.w)(n=>this.storeService.editReceipt(n).pipe((0,g.U)(r=>(console.log("abcd",r),0===r.resultCd?(console.log(r),bt({response:r})):tt({response:r}))),(0,w.K)(r=>(0,A.of)(et({error:r}))))))),this.editReceiptSuccess=(0,c.GW)(()=>this.action.pipe((0,c.l4)(bt)),{dispatch:!1}),this.editReceiptFailed=(0,c.GW)(()=>this.action.pipe((0,c.l4)(tt)),{dispatch:!1}),this.editReceiptSystemFailed=(0,c.GW)(()=>this.action.pipe((0,c.l4)(et)),{dispatch:!1})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(c.eX),t.LFG(Ni))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),Ti=(()=>{class i{constructor(e){this.http=e}getReceiptList(e){return this.http.get("/api/GetReceipt/user/tour",{params:e})}deleteReceipt(e){return this.http.delete("/api/DeleteReceipt/tour"+e.id,e)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(I.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Si=(()=>{class i{constructor(e,o){this.action=e,this.storeService=o,this.getReceiptList=(0,c.GW)(()=>this.action.pipe((0,c.l4)(C),(0,g.U)(n=>n.payload),(0,U.w)(n=>this.storeService.getReceiptList(n).pipe((0,g.U)(r=>(console.log(r),0===r.resultCd?(console.log(r),ft({response:r})):Q({response:r}))),(0,w.K)(r=>(0,A.of)(Y({error:r}))))))),this.getReceiptListSuccess=(0,c.GW)(()=>this.action.pipe((0,c.l4)(ft)),{dispatch:!1}),this.getReceiptListFailed=(0,c.GW)(()=>this.action.pipe((0,c.l4)(Q)),{dispatch:!1}),this.getReceiptListSystemFailed=(0,c.GW)(()=>this.action.pipe((0,c.l4)(Y)),{dispatch:!1}),this.deleteReceipt=(0,c.GW)(()=>this.action.pipe((0,c.l4)(B),(0,g.U)(n=>n.payload),(0,U.w)(n=>this.storeService.deleteReceipt(n).pipe((0,g.U)(r=>(console.log(r),0===r.resultCd?(console.log(r),gt({response:r})):z({response:r}))),(0,w.K)(r=>(0,A.of)(K({error:r}))))))),this.deleteReceiptListSuccess=(0,c.GW)(()=>this.action.pipe((0,c.l4)(gt)),{dispatch:!1}),this.deleteReceiptListFailed=(0,c.GW)(()=>this.action.pipe((0,c.l4)(z)),{dispatch:!1}),this.deleteReceiptListSystemFailed=(0,c.GW)(()=>this.action.pipe((0,c.l4)(K)),{dispatch:!1})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(c.eX),t.LFG(Ti))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),Ai=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[E.ez,v.Bz,vi,It.m,c.sQ.forFeature([xi]),c.sQ.forFeature([Zi]),c.sQ.forFeature([Si]),s.Aw.forFeature(m,bi),s.Aw.forFeature(f,Ei),s.Aw.forFeature(h,yi),v.Bz]}),i})()}}]);