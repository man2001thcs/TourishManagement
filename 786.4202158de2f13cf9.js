"use strict";(self.webpackChunkroxanne=self.webpackChunkroxanne||[]).push([[786],{1089:(O,f,r)=>{r.d(f,{B:()=>u,l:()=>l});const h=new Map([["/admin/dash-board","0th"],["/admin/tourish-plan/list","1st"],["/admin/tourish-plan/create","2nd"],["/admin/tour/category/list","3rd"],["/admin/transport/moving-contact/list","4th"],["/admin/resthouse/rest-house-contact/list","5th"],["/admin/restaurant/list","6th"],["/admin/receipt/list","7th"],["/admin/user/list","8th"],["/admin/chat/list","9th"],["/admin/notification/list","10th"],["/admin/notification/list","11th"],["/admin/transport/service/list","12th"],["/admin/resthouse/service/list","13th"],["/admin/moving/receipt/list","14th"],["/admin/staying/receipt/list","15th"]]),t=new Map([["/user/service-search-page","1st"],["/user/service-search-page","2nd"],["/user/receipt/list","3rd"],["/user/moving/receipt/list","4th"],["/user/staying/receipt/list","5th"]]);function l(g){return h.get(g)??""}function u(g){return t.get(g)??""}},9498:(O,f,r)=>{function t(g){return u.get(g)??""}r.d(f,{f0:()=>t,fb:()=>u});const u=new Map([["I411"," \u0111\xe3 th\xeam tour: "],["I412"," \u0111\xe3 c\u1eadp nh\u1eadt tour: "],["I413"," \u0111\xe3 x\xf3a tour: "],["I421","Th\u1ec3 lo\u1ea1i tour th\xeam th\xe0nh c\xf4ng"],["I422","Th\u1ec3 lo\u1ea1i tour c\u1eadp nh\u1eadt th\xe0nh c\xf4ng"],["I423","Th\u1ec3 lo\u1ea1i tour x\xf3a th\xe0nh c\xf4ng"],["I431"," \u0111\xe3 th\xeam d\u1ecbch v\u1ee5: "],["I432"," \u0111\xe3 c\u1eadp nh\u1eadt d\u1ecbch v\u1ee5: "],["I433"," \u0111\xe3 x\xf3a d\u1ecbch v\u1ee5: "]])},6337:(O,f,r)=>{r.d(f,{j:()=>S});var h=r(529),t=r(4650),l=r(8746),u=r(2340),g=r(8034),y=r(694),x=r(4859),v=r(3546),m=r(6895);const _=["file"];function b(a,d){if(1&a){const n=t.EpF();t.TgZ(0,"div",13)(1,"mat-card",14)(2,"div",15),t._UZ(3,"img",16),t.qZA()()(),t.TgZ(4,"div",13)(5,"button",17),t.NdJ("click",function(){const i=t.CHM(n).index,o=t.oxw();return t.KtG(o.removeFile(i))}),t._uU(6,"G\u1ee1"),t.qZA()()}if(2&a){const n=d.urlLink;t.xp6(3),t.s9C("src",n,t.LSH)}}function N(a,d){if(1&a&&(t.TgZ(0,"div",13)(1,"mat-card",14)(2,"div",15),t._UZ(3,"img",18),t.qZA()()()),2&a){const n=d.urlLink;t.xp6(3),t.s9C("src",n,t.LSH)}}const T=function(a,d){return{index:a,urlLink:d}};function P(a,d){if(1&a&&(t.TgZ(0,"div"),t.GkF(1,22),t.qZA()),2&a){const n=d.$implicit,s=d.index;t.oxw(2);const e=t.MAs(1);t.xp6(1),t.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",t.WLB(2,T,s,n))}}function C(a,d){if(1&a&&(t.TgZ(0,"div",19)(1,"h3",20),t._uU(2,"\u1ea2nh \u0111\u1ea1i di\u1ec7n m\u1edbi"),t.qZA(),t.YNc(3,P,2,5,"div",21),t.qZA()),2&a){const n=t.oxw();t.xp6(3),t.Q6J("ngForOf",n.urlList)}}const I=function(a,d){return{id:a,urlLink:d}};function U(a,d){if(1&a&&(t.TgZ(0,"div"),t.GkF(1,22),t.qZA()),2&a){const n=d.$implicit,s=t.oxw(2),e=t.MAs(3);t.xp6(1),t.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",t.WLB(2,I,n.id,s.generateUrl(n)))}}function w(a,d){if(1&a&&(t.TgZ(0,"div",19)(1,"h3",20),t._uU(2,"\u1ea2nh \u0111\u1ea1i di\u1ec7n hi\u1ec7n t\u1ea1i"),t.qZA(),t.YNc(3,U,2,5,"div",21),t.qZA()),2&a){const n=t.oxw();t.xp6(3),t.Q6J("ngForOf",n.imageList)}}function M(a,d){if(1&a&&(t.TgZ(0,"span",23),t._uU(1),t.qZA()),2&a){const n=t.oxw();t.xp6(1),t.hij(" ",n.progress,"% ")}}let S=(()=>{class a{constructor(n,s,e){this.http=n,this.messageService=s,this.tokenStorage=e,this.productId="",this.productType=0,this.onUploadFinished=new t.vpe,this.fileName="",this.anonymousUrl=u.N.backend.blobURL+"/"+this.productType+"-container/"+this.productType+"_anonymus.png",this.subscriptions=[],this.filesToUpload=[],this.urlList=[],this.urlListOld=[],this.imageDeleteList=[],this.progress=0,this.total=100}ngOnInit(){if(0===this.productType){const n=this.tokenStorage.getUser().Id;this.productId=n}this.getImageList()}changeFile(n){if(console.log(n),!(null===n||n.length<=0)){var s=new FileReader;s.readAsDataURL(n[0]),s.onload=e=>{this.urlList=[...this.urlList,(e.target?.result??"").toString()],n&&this.filesToUpload.push(n[0])}}}removeFile(n){null!==n&&(this.urlList.splice(n,1),this.filesToUpload.splice(n,1),this.fileInputRef.nativeElement.value="")}isRemoved(n){return null!==n&&this.imageDeleteList.findIndex(e=>e===n)>-1}removeOldFile(n){console.log("id: "+n),null!==n&&(this.imageDeleteList.push(n),console.log(this.imageDeleteList))}undoRemoveOldFile(n){if(null===n)return;let s=this.imageDeleteList.findIndex(e=>e===n);s>-1&&this.imageDeleteList.splice(s,1)}uploadFile(){if(this.filesToUpload.length>0){this.imageList.forEach(s=>{"anonymus"!==s.accessSourceId&&this.imageDeleteList.push(s.id??"")});const n={productType:this.productType,fileIdListString:this.imageDeleteList.join(";")};if(this.messageService.openLoadingDialog(),"anonymus"!==this.imageList[0].accessSourceId)this.http.post("/api/FileDelete",n).subscribe(s=>{if("I913"===s.messageCode){const e=new FormData;Array.from(this.filesToUpload).map((i,o)=>e.append("file"+o,i,i.name)),e.append("productId",this.productId??""),e.append("productType",this.productType.toString()),this.http.post("/api/FileUpload",e,{reportProgress:!0,observe:"events"}).pipe((0,l.x)(()=>this.reset())).subscribe({next:i=>{this.messageService.closeLoadingDialog(),i.type===h.dt.UploadProgress?this.progress=Math.round(100*i.loaded/(i.total??100)):i.type===h.dt.Response&&(this.messageService.openNotifyDialog("Upload th\xe0nh c\xf4ng"),this.urlList=[],this.filesToUpload=[],this.progress=0,this.getImageList(),this.onUploadFinished.emit(i.body))},error:i=>{this.messageService.closeLoadingDialog(),console.log(i)}})}else this.messageService.openNotifyDialog("Upload th\u1ea5t b\u1ea1i"),this.messageService.closeLoadingDialog()});else{const s=new FormData;Array.from(this.filesToUpload).map((e,i)=>s.append("file"+i,e,e.name)),s.append("productId",this.productId??""),s.append("productType",this.productType.toString()),this.http.post("/api/FileUpload",s,{reportProgress:!0,observe:"events"}).pipe((0,l.x)(()=>this.reset())).subscribe({next:e=>{this.messageService.closeLoadingDialog(),e.type===h.dt.UploadProgress?this.progress=Math.round(100*e.loaded/(e.total??100)):e.type===h.dt.Response&&(this.messageService.openNotifyDialog("Upload th\xe0nh c\xf4ng"),this.urlList=[],this.filesToUpload=[],this.progress=0,this.getImageList(),this.onUploadFinished.emit(e.body))},error:e=>{this.messageService.closeLoadingDialog(),console.log(e)}})}}}getImageList(){return this.http.get("/api/GetFile",{params:{resourceId:this.productId,resourceType:this.productType}}).subscribe(s=>{this.imageList=s.data,this.imageList?.length>0&&this.imageList.forEach(e=>{this.urlListOld.push(u.N.backend.blobURL+"/"+this.productType+"-container/"+this.productType.toString()+"_"+e.id+e.fileType)}),(null==s.data||null==s.data||0==s.data.length)&&this.imageList.push({id:"anonymus",accessSourceId:"anonymus",fileType:".png",resourceType:this.productType}),this.imageList=s.data})}generateUrl(n){return u.N.backend.blobURL+"/"+this.productType+"-container/"+this.productType.toString()+"_"+n.id+n.fileType}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe()),this.reset()}cancelUpload(){this.uploadSub&&this.uploadSub.unsubscribe(),this.reset()}reset(){this.uploadProgress=0,this.uploadSub&&this.uploadSub.unsubscribe()}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(h.eN),t.Y36(g.e),t.Y36(y.i))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-avatar-upload"]],viewQuery:function(n,s){if(1&n&&t.Gf(_,5),2&n){let e;t.iGM(e=t.CRH())&&(s.fileInputRef=e.first)}},inputs:{productId:"productId",productType:"productType",requiredFileType:"requiredFileType"},outputs:{onUploadFinished:"onUploadFinished"},decls:18,vars:5,consts:[["imageContainer",""],["imageOldContainer",""],[1,"row",2,"margin-bottom","15px","width","100%"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],["type","file","placeholder","Choose file",2,"display","none",3,"change"],["file",""],[1,"button-group",2,"display","flex","flex-direction","row","margin-bottom","20px"],["type","button",1,"btn","btn-success",2,"margin-right","12px",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"row",2,"width","100%","padding-left","30px","padding-right","30px"],["class","col-xs-12 col-sm-12 col-md-6 col-lg-6",4,"ngIf"],[1,"col-md-4"],["class","upload",4,"ngIf"],[1,"row",2,"margin-bottom","15px","margin-right","12px"],[1,"example-card"],[1,"image-show"],["mat-card-image","","alt","Photo",3,"src"],["mat-button","",3,"click"],["mat-card-image","",3,"src"],[1,"col-xs-12","col-sm-12","col-md-6","col-lg-6"],["mat-form-label","",2,"font-weight","bold"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"upload"]],template:function(n,s){if(1&n){const e=t.EpF();t.YNc(0,b,7,1,"ng-template",null,0,t.W1O),t.YNc(2,N,4,1,"ng-template",null,1,t.W1O),t.TgZ(4,"div",2)(5,"div",3)(6,"input",4,5),t.NdJ("change",function(){t.CHM(e);const o=t.MAs(7);return t.KtG(s.changeFile(o.files))}),t.qZA(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(7);return t.KtG(o.click())}),t._uU(10," Upload File "),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){return s.uploadFile()}),t._uU(12," Update image "),t.qZA()()(),t.TgZ(13,"div",9),t.YNc(14,C,4,1,"div",10),t.YNc(15,w,4,1,"div",10),t.qZA(),t.TgZ(16,"div",11),t.YNc(17,M,2,1,"span",12),t.qZA()()}2&n&&(t.xp6(9),t.Q6J("disabled",s.filesToUpload.length>0),t.xp6(2),t.Q6J("disabled",s.filesToUpload.length<=0),t.xp6(3),t.Q6J("ngIf",s.filesToUpload),t.xp6(1),t.Q6J("ngIf",s.imageList),t.xp6(2),t.Q6J("ngIf",s.progress>0))},dependencies:[x.lW,v.a8,v.G2,m.sg,m.O5,m.tP],styles:[".example-card[_ngcontent-%COMP%]{max-width:400px}.example-header-image[_ngcontent-%COMP%]{background-image:url(https://material.angular.io/assets/img/examples/shiba1.jpg);background-size:cover}.image-show[_ngcontent-%COMP%]{display:flex;flex-direction:row}.image-show[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:400px}"]}),a})()},4503:(O,f,r)=>{r.d(f,{h:()=>d});var h=r(5861),t=r(4650),l=r(4006),u=r(9498),g=r(2340),y=r(7850),x=r(694),v=r(529),m=r(2556),_=r(6895),b=r(1572),N=r(1489),T=r(6582);const P=["singleNotify"],C=function(n){return{color:n}};let I=(()=>{class n{constructor(e,i,o,p,L,c,k){this.fb=e,this.renderer=i,this.tokenStorage=o,this.http=p,this.swPush=L,this.signalRService=c,this.router=k,this.isNotifyOpen=!1,this.isInView=new t.vpe,this.imageList=[],this.active=1,this.avatarUrl=g.N.backend.blobURL+"/0-container/0_anonymus.png",this.isSubmit=!1,this.showSpinners=!0,this.showSeconds=!1,this.touchUi=!1,this.enableMeridian=!1,this.firstLoading=!0,this.notificationList=[],this.subscriptions=[],this.length=0,this.isFirstRead=!0,this.color="primary"}ngOnInit(){}ngAfterViewChecked(){this.checkIfInView()}ngOnDestroy(){this.scrollSubscription&&this.scrollSubscription.unsubscribe()}checkIfInView(){this.isFirstRead&&this.isNotifyOpen&&this.isElementInViewport(this.singleNotify.nativeElement)&&(!this.notification.isRead&&this.isFirstRead&&this.isInView.emit(this.notification.id),this.isFirstRead=!1)}isElementInViewport(e){const i=e.getBoundingClientRect();return i.top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth)}capitalizeFirstLetter(e){return e.split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ")}getContent(e){let i="",o="";return null!=e.objectName&&e.objectName.length>0&&(o=e.objectName),null!==e.contentCode?(i=(0,u.f0)(e.contentCode??"")+o,(e.contentCode??"").length<=0&&(i=e.content)):i=e.content,i}getCreator(e){let i="";return null!=e?.creatorFullName?e?.creatorFullName.length>0&&(i=e.creatorFullName):i="Anonymus",e.userCreateId==this.tokenStorage.getUser().Id&&(i="B\u1ea1n"),i+""}getImageList(){return this.http.get("/api/GetFile",{params:{resourceId:this.notification.userCreateId,resourceType:0}}).subscribe(i=>{i.data?.length>0&&(this.avatarUrl=this.generateUrl(i.data[0])),(null==i.data||null==i.data||0==i.data.length)&&(this.avatarUrl=g.N.backend.blobURL+"/0-container/0_anonymus.png")})}generateUrl(e){return g.N.backend.blobURL+"/0-container/0_"+e.id+e.fileType}getTime(e){if(""===e)return"G\u1ea7n 1 ph\xfat tr\u01b0\u1edbc";const i=new Date(e),o=new Date,p=6e4*o.getTimezoneOffset();o.setTime(o.getTime()+p),new Date(o.toISOString());let c=(o.valueOf()-i.valueOf())/1e3;return c<60?"G\u1ea7n 1 ph\xfat tr\u01b0\u1edbc":c>=60&&c<3600?(c/60).toFixed(0)+" ph\xfat tr\u01b0\u1edbc":c>=3600&&c<86400?(c/3600).toFixed(0)+" ti\u1ebfng tr\u01b0\u1edbc":c>=86400&&c<2592e3?(c/86400).toFixed(0)+" ng\xe0y tr\u01b0\u1edbc":(c/2592e3).toFixed(0)+" th\xe1ng tr\u01b0\u1edbc"}onClickRedirect(e){e.contentCode?.includes("I41")&&this.router.navigate(["admin/tourish-plan/detail/"+this.notification.tourishPlan?.id+"/edit"]),e.content.includes("H\u1ec7 th\u1ed1ng nh\u1eadn \u0111\u01b0\u1ee3c y\xeau c\u1ea7u t\u01b0 v\u1ea5n m\u1edbi")&&this.router.navigate(["admin/chat/display/"+this.notification.connectionId])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.qu),t.Y36(t.Qsj),t.Y36(x.i),t.Y36(v.eN),t.Y36(N.Mk),t.Y36(m.M),t.Y36(T.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-notification-single"]],viewQuery:function(e,i){if(1&e&&t.Gf(P,5),2&e){let o;t.iGM(o=t.CRH())&&(i.singleNotify=o.first)}},inputs:{notification:"notification",viewChildPack:"viewChildPack",isNotifyOpen:"isNotifyOpen"},outputs:{isInView:"isInView"},decls:13,vars:13,consts:[[1,"single-notification"],["singleNotify",""],[1,"image"],["alt","Avatar",1,"avatar",2,"border-radius","50%",3,"src"],[1,"content"],[1,"content-description"],[3,"ngStyle"],[2,"font-weight","bold",3,"ngStyle"],[1,"time"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0,1)(2,"div",2),t._UZ(3,"img",3),t.qZA(),t.TgZ(4,"div",4)(5,"div",5)(6,"span",6)(7,"span",7),t._uU(8),t.qZA(),t._uU(9),t.qZA()(),t.TgZ(10,"div",8)(11,"span",6),t._uU(12),t.qZA()()()()),2&e){let o;t.xp6(3),t.s9C("src",i.avatarUrl,t.LSH),t.xp6(3),t.Q6J("ngStyle",t.VKq(7,C,i.notification.isRead?"#6D6F72":"#212121")),t.xp6(1),t.Q6J("ngStyle",t.VKq(9,C,i.notification.isRead?"#6D6F72":"#212121")),t.xp6(1),t.Oqu(i.getCreator(i.notification)),t.xp6(1),t.Oqu(i.getContent(i.notification)),t.xp6(2),t.Q6J("ngStyle",t.VKq(11,C,i.notification.isRead?"#6D6F72":"#212121")),t.xp6(1),t.Oqu(i.getTime(null!==(o=i.notification.updateDate)&&void 0!==o?o:""))}},dependencies:[_.PC],styles:[".single-notification[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:5px 20px 2px;width:100%;flex-wrap:nowrap;max-width:400px}.single-notification[_ngcontent-%COMP%]:hover{cursor:pointer}.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:80px;width:80px}.image[_ngcontent-%COMP%]{border-radius:50%;height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content;margin-bottom:20px;margin-right:10px}.single-notification[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:row}.single-notification[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.single-notification[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .content-description[_ngcontent-%COMP%]{display:flex;flex-direction:row}.single-notification[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .content-description[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;font-size:16px;word-wrap:break-word;min-width:250px}.single-notification[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-self:flex-end}.single-notification[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:lighter;font-size:14px}"]}),n})();const U=["singleNotify"],w=["notifyPack"],M=function(n){return{width:n}};function S(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-notification-single",4,5),t.NdJ("isInView",function(o){t.CHM(e);const p=t.oxw();return t.KtG(p.changeToReadState(o))}),t.qZA()}if(2&n){const e=s.$implicit,i=t.oxw();t.Q6J("notification",e)("isNotifyOpen",i.isNotifyOpen)("viewChildPack",i.notifyPackContainer)("ngStyle",t.VKq(4,M,i.signleNotifyWidth))}}function a(n,s){1&n&&(t.TgZ(0,"div",6)(1,"span",7),t._uU(2,"\u0110ang t\u1ea3i"),t.qZA(),t._UZ(3,"mat-spinner",8),t.qZA()),2&n&&(t.xp6(3),t.Q6J("diameter",20))}let d=(()=>{class n{constructor(e,i,o,p){this.fb=e,this.tokenStorage=i,this.http=o,this.signalRService=p,this.isNotifyOpen=!1,this.notifyUnreadNumber=new t.vpe,this.active=1,this.avatarUrl=g.N.backend.blobURL+"/0-container/0_anonymus.png",this.signleNotifyWidth="350px",this.isSubmit=!1,this.showSpinners=!0,this.showSeconds=!1,this.touchUi=!1,this.enableMeridian=!1,this.firstLoading=!0,this.notificationList=[],this.subscriptions=[],this.length=0,this.pageSize=20,this.color="primary",this.isNotRead=0}ngOnDestroy(){this.signalRService.stopConnect()}ngOnInit(){this.requestPermission(),this.listen(),this.signalRNotification(),this.setTourForm=this.fb.group({name:["",l.kI.compose([l.kI.required])],endDate:["",l.kI.compose([l.kI.required])],email:["",l.kI.compose([l.kI.required])],phoneNumber:["",l.kI.compose([l.kI.required])],totalTicket:[0,l.kI.compose([l.kI.required])],description:["",l.kI.compose([l.kI.required,l.kI.minLength(3)])]}),this.getNotifyPack(),this.subscriptions.push(this.signalRService.NotifyFeedObservable.subscribe(e=>{if(e){let i=this.notificationList.findIndex(o=>o.id===e.id);i>-1?this.notificationList[i]=e:(this.notificationList=[e,...this.notificationList],this.isNotRead++,this.notifyUnreadNumber.emit(this.isNotRead))}})),this.subscriptions.push(this.signalRService.IsNotifyReadObservable.subscribe(e=>{if(e&&e.isRead){const i=this.notificationList.findIndex(o=>o.id===e.id);i>-1&&(this.notificationList[i].isRead||(this.notificationList[i].isRead=!0,this.isNotRead--,this.notifyUnreadNumber.emit(this.isNotRead)))}}))}ngAfterViewInit(){new ResizeObserver(i=>{for(const o of i)this.adjustSize()}).observe(this.notifyPackContainer.nativeElement),this.adjustSize()}signalRNotification(){const e={token:this.tokenStorage.getToken()};this.signalRService.startConnectionWithParam("/api/user/notify",e).then(()=>{this.signalRService.listenToNotifyFeeds("SendOffersToUser"),this.signalRService.listenToIsNotifyReadFeeds("ChangeNotifyToRead")})}getNotifyPack(){const e=this.tokenStorage.getUser();this.http.get("/api/GetNotification/receiver",{params:{page:1,pageSize:this.pageSize,receiverId:e.Id,sortBy:"CreateDate",sortDirection:"desc"}}).subscribe(o=>{o&&(this.notificationList=o.data,console.log("notify: ",o),this.length=o.count,this.firstLoading=!1,this.isNotRead=this.notificationList.filter(p=>!p.isRead).length,this.notifyUnreadNumber.emit(this.isNotRead))})}capitalizeFirstLetter(e){return e.split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ")}getContent(e){let i="",o="";return o=null!=e.objectName&&e.objectName.length>0?e.objectName:e.tourishPlan?.tourName??"",i=null!==e.contentCode?(0,u.f0)(e.contentCode??"")+o:e.content,i}getCreator(e){let i="";return i=null!=e.creatorFullName&&e.creatorFullName.length>0?e.creatorFullName:e.userCreator?.fullName??"Anonymus",i+""}getTime(e){if(""===e)return"G\u1ea7n 1 ph\xfat tr\u01b0\u1edbc";const i=new Date(e),o=new Date,p=6e4*o.getTimezoneOffset();o.setTime(o.getTime()+p),new Date(o.toISOString());let c=(o.valueOf()-i.valueOf())/1e3;return c<60?"G\u1ea7n 1 ph\xfat tr\u01b0\u1edbc":c>=60&&c<3600?(c/60).toFixed(0)+" ph\xfat tr\u01b0\u1edbc":c>=3600&&c<86400?(c/3600).toFixed(0)+" ti\u1ebfng tr\u01b0\u1edbc":c>=86400&&c<2592e3?(c/86400).toFixed(0)+" ng\xe0y tr\u01b0\u1edbc":(c/2592e3).toFixed(0)+" th\xe1ng tr\u01b0\u1edbc"}showNotification(e,i){return(0,h.Z)(function*(){"Notification"in window?"granted"===Notification.permission?new Notification(e,{body:i}):"denied"!==Notification.permission&&Notification.requestPermission().then(function(){var o=(0,h.Z)(function*(p){});return function(p){return o.apply(this,arguments)}}()):console.log("This browser does not support notifications")})()}requestPermission(){y.F.getToken({vapidKey:g.N.firebaseConfig.vapidKey}).then(e=>{if(e){console.log("abc",e);const i=this.tokenStorage.getUser().Id;this.http.post("/api/SaveNotifyFcmToken",{deviceToken:e,userId:i}).subscribe(p=>{console.log(p)})}else console.log("No registration token available. Request permission to generate one.")}).catch(e=>{console.log(e)})}listen(){y.F.onMessage(e=>{console.log(e)})}adjustSize(){this.signleNotifyWidth=parseInt(this.notifyPackContainer.nativeElement.offsetWidth,0)>=1e3?"350px":"100%"}test(e,i){console.log(i,e),this.changeToReadState(i)}changeToReadState(e){const i=this.notificationList.findIndex(o=>o.id===e);i>-1&&(this.notificationList[i].isRead||(this.notificationList[i].isRead=!0,this.isNotRead--,this.notifyUnreadNumber.emit(this.isNotRead))),this.signalRService.invokeOneInfoFeeds("ChangeNotifyToRead",e,!0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.qu),t.Y36(x.i),t.Y36(v.eN),t.Y36(m.M))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-notification-pack"]],viewQuery:function(e,i){if(1&e&&(t.Gf(U,5),t.Gf(w,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.singleNotifyContainer=o.first),t.iGM(o=t.CRH())&&(i.notifyPackContainer=o.first)}},inputs:{isNotifyOpen:"isNotifyOpen"},outputs:{notifyUnreadNumber:"notifyUnreadNumber"},decls:4,vars:2,consts:[[1,"notify-pack",2,"overflow-y","auto !important","height","100% !important"],["notifyPack",""],[3,"notification","isNotifyOpen","viewChildPack","ngStyle","isInView",4,"ngFor","ngForOf"],["class","single-notification","style","display: flex; flex-direction: row; align-items: center",4,"ngIf"],[3,"notification","isNotifyOpen","viewChildPack","ngStyle","isInView"],["singleNotify",""],[1,"single-notification",2,"display","flex","flex-direction","row","align-items","center"],[2,"margin-right","5px"],[3,"diameter"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0,1),t.YNc(2,S,2,6,"app-notification-single",2),t.YNc(3,a,4,1,"div",3),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngForOf",i.notificationList),t.xp6(1),t.Q6J("ngIf",i.firstLoading))},dependencies:[_.sg,_.O5,_.PC,b.Ou,I],styles:[".notify-pack[_ngcontent-%COMP%]{overflow-y:auto!important;height:100%!important}.single-notification[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:5px 20px 2px}.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:80px;width:80px}.image[_ngcontent-%COMP%]{border-radius:50%;height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content;margin-bottom:20px;margin-right:10px}.single-notification[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:row}.single-notification[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.single-notification[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .content-description[_ngcontent-%COMP%]{display:flex;flex-direction:row}.single-notification[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .content-description[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;font-size:16px}.single-notification[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-self:flex-end}.single-notification[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:lighter;font-size:14px}app-notification-single[_ngcontent-%COMP%]{width:350px}.notify-pack[_ngcontent-%COMP%]{width:100%}"]}),n})()}}]);